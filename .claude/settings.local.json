{
  "permissions": {
    "allow": [
      "Bash(mkdir:*)",
      "Bash(npm init:*)",
      "Bash(npm install:*)",
      "Bash(brew install:*)",
      "Bash(brew services start:*)",
      "Bash(export PATH=\"/opt/homebrew/opt/postgresql@14/bin:$PATH\")",
      "Bash(psql:*)",
      "Bash(npm run dev:*)",
      "Bash(curl:*)",
      "Bash(node server.js:*)",
      "Bash(lsof:*)",
      "Bash(npm run seed:*)",
      "Bash(python3:*)",
      "Bash(tree:*)",
      "Bash(xargs kill -9)",
      "Bash(npm start)",
      "Bash(TOKEN=\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwiZW1haWwiOiJhZG1pbkAzZy5jb20iLCJyb2wiOiJhZG1pbmlzdHJhZG9yIiwiaWF0IjoxNzYxNjcwODAxLCJleHAiOjE3NjIyNzU2MDF9.luXoH_pjktHbyOj7QeAmCPE7VG7nh592eRt4kdH--2I\")",
      "Read(//private/tmp/**)",
      "Bash(bash -c 'TOKEN=$(cat /tmp/token.txt) && curl -s -X POST http://localhost:5001/api/articulos -H \"\"Content-Type: application/json\"\" -H \"\"Authorization: Bearer $TOKEN\"\" -d \"\"{\\\"\"nombre\\\"\":\\\"\"Tornillo hexagonal\\\"\",\\\"\"descripcion\\\"\":\\\"\"Tornillo hexagonal de acero\\\"\",\\\"\"categoria_id\\\"\":1,\\\"\"ubicacion_id\\\"\":1,\\\"\"stock_actual\\\"\":100,\\\"\"stock_minimo\\\"\":20,\\\"\"unidad\\\"\":\\\"\"piezas\\\"\",\\\"\"costo_unitario\\\"\":2.5}\"\" | head -100')",
      "Bash(bash -c 'TOKEN=$(cat /tmp/token2.txt) && curl -s -X POST http://localhost:5001/api/articulos -H \"\"Content-Type: application/json\"\" -H \"\"Authorization: Bearer $TOKEN\"\" -d \"\"{\\\"\"nombre\\\"\":\\\"\"Tornillo hexagonal 1/4\\\"\",\\\"\"descripcion\\\"\":\\\"\"Tornillo hexagonal de acero inoxidable\\\"\",\\\"\"categoria_id\\\"\":1,\\\"\"ubicacion_id\\\"\":1,\\\"\"stock_actual\\\"\":100,\\\"\"stock_minimo\\\"\":20,\\\"\"unidad\\\"\":\\\"\"piezas\\\"\",\\\"\"costo_unitario\\\"\":2.5}\"\"')",
      "Bash(bash -c 'TOKEN=$(cat /tmp/token2.txt) && curl -s -X GET http://localhost:5001/api/articulos -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -m json.tool | head -50')",
      "Bash(bash -c 'TOKEN=$(cat /tmp/token2.txt) && curl -s -X POST http://localhost:5001/api/movimientos -H \"\"Content-Type: application/json\"\" -H \"\"Authorization: Bearer $TOKEN\"\" -d \"\"{\\\"\"tipo\\\"\":\\\"\"retiro\\\"\",\\\"\"articulos\\\"\":[{\\\"\"articulo_id\\\"\":1,\\\"\"cantidad\\\"\":10,\\\"\"observaciones\\\"\":\\\"\"Retiro para proyecto test\\\"\"}],\\\"\"observaciones\\\"\":\\\"\"Prueba de retiro desde API\\\"\"}\"\" | python3 -m json.tool')",
      "Bash(bash -c 'TOKEN=$(cat /tmp/token2.txt) && curl -s -X GET http://localhost:5001/api/movimientos -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -m json.tool | head -60')",
      "Bash(bash -c 'TOKEN=$(cat /tmp/token2.txt) && curl -s -X GET \"\"http://localhost:5001/api/articulos/1\"\" -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -m json.tool | grep -A2 \"\"stock_actual\"\"')",
      "Bash(npm create vite@latest frontend -- --template react)",
      "Bash(npx tailwindcss init -p)",
      "Bash(npm uninstall:*)",
      "Bash(bash -c 'TOKEN=$(cat /tmp/token2.txt) && curl -s -X GET \"\"http://localhost:5001/api/movimientos\"\" -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -m json.tool | head -80')",
      "Bash(bash -c 'TOKEN=$(cat /tmp/token2.txt) && curl -s -X DELETE \"\"http://localhost:5001/api/articulos/1\"\" -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -m json.tool')",
      "Bash(npm create:*)",
      "Bash(npm run build:*)",
      "Bash(cat:*)",
      "Bash(./node_modules/.bin/tailwindcss:*)",
      "Bash(TOKEN=\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwiZW1haWwiOiJhZG1pbkAzZy5jb20iLCJyb2wiOiJhZG1pbmlzdHJhZG9yIiwiaWF0IjoxNzYxNzA5OTE5LCJleHAiOjE3NjIzMTQ3MTl9.eUWAduow_ybTulyzfVFaYjHytyp6eU0hTqXwul4rh90\")",
      "Bash(TOKEN=\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwiZW1haWwiOiJhZG1pbkAzZy5jb20iLCJyb2wiOiJhZG1pbmlzdHJhZG9yIiwiaWF0IjoxNzYxNzA5OTc4LCJleHAiOjE3NjIzMTQ3Nzh9.E74YEOArFSIxbANyAUFDwPF4yMYgX4SuTeH1D2vz4qk\")",
      "Bash(bash -c 'TOKEN=\"\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwiZW1haWwiOiJhZG1pbkAzZy5jb20iLCJyb2wiOiJhZG1pbmlzdHJhZG9yIiwiaWF0IjoxNzYxNzA5OTc4LCJleHAiOjE3NjIzMTQ3Nzh9.E74YEOArFSIxbANyAUFDwPF4yMYgX4SuTeH1D2vz4qk\"\" && curl -s -X GET http://localhost:5001/api/articulos -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -m json.tool | head -80')",
      "Bash(TOKEN=\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MSwiZW1haWwiOiJhZG1pbkAzZy5jb20iLCJyb2wiOiJhZG1pbmlzdHJhZG9yIiwiaWF0IjoxNzYxNzEzNzM0LCJleHAiOjE3NjIzMTg1MzR9.4NTDRfldCL1sPWoE_J81OqJk4Y7EwC4jVlrfzjcWNM4\")",
      "Bash(bash -c 'TOKEN=$(curl -s -X POST http://localhost:5001/api/auth/login -H \"\"Content-Type: application/json\"\" -d \"\"{\\\"\"email\\\"\":\\\"\"admin@3g.com\\\"\",\\\"\"password\\\"\":\\\"\"admin123\\\"\"}\"\" | python3 -c \"\"import sys, json; print(json.load(sys.stdin)[\\\"\"data\\\"\"][\\\"\"token\\\"\"])\"\") && curl -s -X GET http://localhost:5001/api/articulos -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -m json.tool | head -60')",
      "Bash(bash -c 'TOKEN=$(curl -s -X POST http://localhost:5001/api/auth/login -H \"\"Content-Type: application/json\"\" -d \"\"{\\\"\"email\\\"\":\\\"\"admin@3g.com\\\"\",\\\"\"password\\\"\":\\\"\"admin123\\\"\"}\"\" | python3 -c \"\"import sys, json; print(json.load(sys.stdin)[\\\"\"data\\\"\"][\\\"\"token\\\"\"])\"\") && curl -s -X GET \"\"http://localhost:5001/api/articulos/ean13/0000000000001\"\" -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -m json.tool')",
      "Bash(bash -c 'TOKEN=$(curl -s -X POST http://localhost:5001/api/auth/login -H \"\"Content-Type: application/json\"\" -d \"\"{\\\"\"email\\\"\":\\\"\"admin@3g.com\\\"\",\\\"\"password\\\"\":\\\"\"admin123\\\"\"}\"\" | python3 -c \"\"import sys, json; print(json.load(sys.stdin)[\\\"\"data\\\"\"][\\\"\"token\\\"\"])\"\") && curl -s -X POST http://localhost:5001/api/articulos -H \"\"Content-Type: application/json\"\" -H \"\"Authorization: Bearer $TOKEN\"\" -d \"\"{\\\"\"nombre\\\"\":\\\"\"Tornillo Allen 3/8\\\"\",\\\"\"descripcion\\\"\":\\\"\"Tornillo Allen de acero\\\"\",\\\"\"categoria_id\\\"\":1,\\\"\"ubicacion_id\\\"\":1,\\\"\"stock_actual\\\"\":200,\\\"\"stock_minimo\\\"\":50,\\\"\"unidad\\\"\":\\\"\"piezas\\\"\",\\\"\"costo_unitario\\\"\":3.5}\"\" | python3 -m json.tool')",
      "Bash(bash -c 'TOKEN=$(curl -s -X POST http://localhost:5001/api/auth/login -H \"\"Content-Type: application/json\"\" -d \"\"{\\\"\"email\\\"\":\\\"\"admin@3g.com\\\"\",\\\"\"password\\\"\":\\\"\"admin123\\\"\"}\"\" | python3 -c \"\"import sys, json; print(json.load(sys.stdin)[\\\"\"data\\\"\"][\\\"\"token\\\"\"])\"\") && curl -s -X POST http://localhost:5001/api/articulos -H \"\"Content-Type: application/json\"\" -H \"\"Authorization: Bearer $TOKEN\"\" -d \"\"{\\\"\"codigo_ean13\\\"\":\\\"\"7501234567890\\\"\",\\\"\"nombre\\\"\":\\\"\"Tuerca hexagonal 1/2\\\"\",\\\"\"descripcion\\\"\":\\\"\"Tuerca hexagonal galvanizada\\\"\",\\\"\"categoria_id\\\"\":1,\\\"\"ubicacion_id\\\"\":2,\\\"\"stock_actual\\\"\":500,\\\"\"stock_minimo\\\"\":100,\\\"\"unidad\\\"\":\\\"\"piezas\\\"\",\\\"\"costo_unitario\\\"\":1.5}\"\" | python3 -m json.tool')",
      "Bash(bash -c 'TOKEN=$(curl -s -X POST http://localhost:5001/api/auth/login -H \"\"Content-Type: application/json\"\" -d \"\"{\\\"\"email\\\"\":\\\"\"admin@3g.com\\\"\",\\\"\"password\\\"\":\\\"\"admin123\\\"\"}\"\" | python3 -c \"\"import sys, json; print(json.load(sys.stdin)[\\\"\"data\\\"\"][\\\"\"token\\\"\"])\"\") && curl -s -X GET \"\"http://localhost:5001/api/articulos/ean13/2000000000053\"\" -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -m json.tool')",
      "Bash(bash -c 'TOKEN=$(curl -s -X POST http://localhost:5001/api/auth/login -H \"\"Content-Type: application/json\"\" -d \"\"{\\\"\"email\\\"\":\\\"\"admin@3g.com\\\"\",\\\"\"password\\\"\":\\\"\"admin123\\\"\"}\"\" | python3 -c \"\"import sys, json; print(json.load(sys.stdin)[\\\"\"data\\\"\"][\\\"\"token\\\"\"])\"\") && curl -s -H \"\"Authorization: Bearer $TOKEN\"\" http://localhost:5001/api/articulos/5/barcode -o /tmp/barcode-test.png && echo \"\"‚úÖ C√≥digo de barras generado en /tmp/barcode-test.png\"\" && file /tmp/barcode-test.png')",
      "Read(//tmp/**)",
      "Bash(bash -c 'TOKEN=$(curl -s -X POST http://localhost:5001/api/auth/login -H \"\"Content-Type: application/json\"\" -d \"\"{\\\"\"email\\\"\":\\\"\"admin@3g.com\\\"\",\\\"\"password\\\"\":\\\"\"admin123\\\"\"}\"\" | python3 -c \"\"import sys, json; print(json.load(sys.stdin)[\\\"\"data\\\"\"][\\\"\"token\\\"\"])\"\") && curl -s -X GET \"\"http://localhost:5001/api/articulos\"\" -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -c \"\"import sys, json; data = json.load(sys.stdin); [print(f\\\"\"ID: {a[\\\"\"id\\\"\"]} | EAN-13: {a[\\\"\"codigo_ean13\\\"\"]} | {a[\\\"\"nombre\\\"\"]}\\\"\") for a in data[\\\"\"data\\\"\"][\\\"\"articulos\\\"\"] if a.get(\\\"\"activo\\\"\")]\"\"')",
      "Bash(bash -c 'TOKEN=$(curl -s -X POST http://localhost:5001/api/auth/login -H \"\"Content-Type: application/json\"\" -d \"\"{\\\"\"email\\\"\":\\\"\"admin@3g.com\\\"\",\\\"\"password\\\"\":\\\"\"admin123\\\"\"}\"\" | python3 -c \"\"import sys, json; print(json.load(sys.stdin)[\\\"\"data\\\"\"][\\\"\"token\\\"\"])\"\") && curl -s -H \"\"Authorization: Bearer $TOKEN\"\" http://localhost:5001/api/articulos/5/barcode -o /tmp/barcode-5.png && curl -s -H \"\"Authorization: Bearer $TOKEN\"\" http://localhost:5001/api/articulos/6/barcode -o /tmp/barcode-6.png && curl -s -H \"\"Authorization: Bearer $TOKEN\"\" http://localhost:5001/api/articulos/4/barcode -o /tmp/barcode-4.png && echo \"\"‚úÖ C√≥digos generados\"\"')",
      "Bash(bash -c 'TOKEN=$(curl -s -X POST http://localhost:5001/api/auth/login -H \"\"Content-Type: application/json\"\" -d \"\"{\\\"\"email\\\"\":\\\"\"admin@3g.com\\\"\",\\\"\"password\\\"\":\\\"\"admin123\\\"\"}\"\" | python3 -c \"\"import sys, json; print(json.load(sys.stdin)[\\\"\"data\\\"\"][\\\"\"token\\\"\"])\"\") && curl -s -X GET \"\"http://localhost:5001/api/articulos\"\" -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -c \"\"import sys, json; data = json.load(sys.stdin); [print(f\\\"\"ID: {a[\\\"\"id\\\"\"]} | EAN-13: {a.get(\\\"\"codigo_ean13\\\"\", \\\"\"N/A\\\"\")} | {a[\\\"\"nombre\\\"\"]}\\\"\"\"\") for a in data[\\\"\"data\\\"\"][\\\"\"articulos\\\"\"] if a.get(\\\"\"activo\\\"\")]\"\"')",
      "Bash(bash -c 'TOKEN=$(cat /tmp/token3.txt) && curl -s -X GET \"\"http://localhost:5001/api/articulos/4\"\" -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -m json.tool')",
      "Bash(bash -c 'TOKEN=$(cat /tmp/token3.txt) && curl -s -X GET \"\"http://localhost:5001/api/articulos/6\"\" -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -m json.tool')",
      "Bash(node -e:*)",
      "Bash(bash -c 'TOKEN=$(cat /tmp/token3.txt) && curl -s -X PUT \"\"http://localhost:5001/api/articulos/4\"\" -H \"\"Content-Type: application/json\"\" -H \"\"Authorization: Bearer $TOKEN\"\" -d \"\"{\\\"\"codigo_ean13\\\"\":\\\"\"2000000000046\\\"\"}\"\" | python3 -m json.tool')",
      "Bash(bash -c 'TOKEN=$(cat /tmp/token3.txt) && curl -s -X PUT \"\"http://localhost:5001/api/articulos/6\"\" -H \"\"Content-Type: application/json\"\" -H \"\"Authorization: Bearer $TOKEN\"\" -d \"\"{\\\"\"codigo_ean13\\\"\":\\\"\"2000000000060\\\"\"}\"\" | python3 -m json.tool')",
      "Bash(bash -c 'TOKEN=$(cat /tmp/token3.txt) && curl -s -H \"\"Authorization: Bearer $TOKEN\"\" http://localhost:5001/api/articulos/4/barcode -o /tmp/barcode-4-fixed.png && echo \"\"‚úÖ C√≥digo de barras art√≠culo 4 generado\"\" && file /tmp/barcode-4-fixed.png')",
      "Bash(bash -c 'TOKEN=$(cat /tmp/token3.txt) && curl -s -H \"\"Authorization: Bearer $TOKEN\"\" http://localhost:5001/api/articulos/6/barcode -o /tmp/barcode-6-fixed.png && echo \"\"‚úÖ C√≥digo de barras art√≠culo 6 generado\"\" && file /tmp/barcode-6-fixed.png')",
      "Bash(node /tmp/verify-ean13.mjs:*)",
      "Bash(bash -c 'TOKEN=$(cat /tmp/token3.txt) && for ID in 4 5 6; do echo \"\"Generando c√≥digo de barras para art√≠culo $ID...\"\"; curl -s -H \"\"Authorization: Bearer $TOKEN\"\" \"\"http://localhost:5001/api/articulos/$ID/barcode\"\" -o \"\"/tmp/barcode-test-$ID.png\"\"; TYPE=$(file \"\"/tmp/barcode-test-$ID.png\"\" | grep -o \"\"PNG image data\"\" || echo \"\"ERROR\"\"); echo \"\"  ‚Üí $TYPE\"\"; done && echo -e \"\"\\n‚úÖ Verificaci√≥n completa\"\"')",
      "Bash(bash -c 'TOKEN=$(cat /tmp/token.txt) && for ID in 4 5 6; do echo \"\"Descargando c√≥digo de barras del art√≠culo $ID...\"\"; curl -s -H \"\"Authorization: Bearer $TOKEN\"\" \"\"http://localhost:5001/api/articulos/$ID/barcode\"\" -o \"\"/Users/andrewww/Documents/Inventario-3G/barcodes/articulo-$ID.png\"\"; done && echo \"\"‚úÖ C√≥digos de barras descargados\"\"')",
      "Bash(bash -c 'TOKEN=$(cat /tmp/test-token.txt) && curl -I -H \"\"Authorization: Bearer $TOKEN\"\" http://localhost:5001/api/articulos/4/barcode 2>&1 | head -10')",
      "Bash(bash -c 'TOKEN=$(cat /tmp/token.txt) && curl -s -X GET \"\"http://localhost:5001/api/articulos\"\" -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -c \"\"import sys, json; data = json.load(sys.stdin); [print(f\\\"\"ID: {a[\\\"\"id\\\"\"]:2} | EAN-13: {a.get(\\\"\"codigo_ean13\\\"\", \\\"\"NONE\\\"\"):15} | Activo: {a.get(\\\"\"activo\\\"\")} | {a[\\\"\"nombre\\\"\"]}\\\"\") for a in data[\\\"\"data\\\"\"][\\\"\"articulos\\\"\"]]\"\"')",
      "Bash(bash -c 'TOKEN=$(cat /tmp/token.txt) && curl -s -X PUT \"\"http://localhost:5001/api/articulos/1\"\" -H \"\"Content-Type: application/json\"\" -H \"\"Authorization: Bearer $TOKEN\"\" -d \"\"{\\\"\"codigo_ean13\\\"\":\\\"\"2000000000015\\\"\",\\\"\"activo\\\"\":true}\"\" | python3 -m json.tool | head -20')",
      "Bash(bash -c 'TOKEN=$(cat /tmp/token.txt) && curl -s -X PUT \"\"http://localhost:5001/api/articulos/2\"\" -H \"\"Content-Type: application/json\"\" -H \"\"Authorization: Bearer $TOKEN\"\" -d \"\"{\\\"\"codigo_ean13\\\"\":\\\"\"2000000000022\\\"\",\\\"\"activo\\\"\":true}\"\" | python3 -m json.tool | head -20')",
      "Bash(bash -c 'TOKEN=$(cat /tmp/token.txt) && curl -s -X PUT \"\"http://localhost:5001/api/articulos/3\"\" -H \"\"Content-Type: application/json\"\" -H \"\"Authorization: Bearer $TOKEN\"\" -d \"\"{\\\"\"codigo_ean13\\\"\":\\\"\"2000000000039\\\"\",\\\"\"activo\\\"\":true}\"\" | python3 -m json.tool | head -20')",
      "Bash(bash -c 'TOKEN=$(cat /tmp/token.txt) && echo \"\"Probando generaci√≥n de c√≥digos de barras...\"\" && for ID in 1 2 3 4 5 6; do echo -n \"\"Art√≠culo $ID: \"\"; curl -s -H \"\"Authorization: Bearer $TOKEN\"\" \"\"http://localhost:5001/api/articulos/$ID/barcode\"\" -o \"\"/tmp/barcode-test-$ID.png\"\"; TYPE=$(file \"\"/tmp/barcode-test-$ID.png\"\" 2>/dev/null | grep -o \"\"PNG image data\"\" || echo \"\"ERROR\"\"); echo \"\"$TYPE\"\"; done')",
      "Bash(awk:*)",
      "Bash(bash -c 'TOKEN=$(cat /tmp/token.txt) && curl -s -X GET \"\"http://localhost:5001/api/articulos?activo=true\"\" -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -c \"\"import sys, json; data = json.load(sys.stdin); print(\\\"\"\\\\n=== ART√çCULOS ACTIVOS CON C√ìDIGOS EAN-13 ===\\\\n\\\"\"); [print(f\\\"\"‚úÖ ID: {a[\\\"\"id\\\"\"]:2} | EAN-13: {a[\\\"\"codigo_ean13\\\"\"]} | {a[\\\"\"nombre\\\"\"]}\\\"\") for a in data[\\\"\"data\\\"\"][\\\"\"articulos\\\"\"]]; print(f\\\"\"\\\\nTotal: {len(data[\\\"\"data\\\"\"][\\\"\"articulos\\\"\"])} art√≠culos activos\\\"\")\"\"')",
      "Bash(bash -c 'TOKEN=$(cat /tmp/token.txt) && curl -s -X GET \"\"http://localhost:5001/api/categorias\"\" -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -m json.tool | head -30')",
      "Bash(bash -c 'TOKEN=$(cat /tmp/token.txt) && curl -s -X GET \"\"http://localhost:5001/api/ubicaciones\"\" -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -m json.tool | head -30')",
      "Bash(bash -c 'TOKEN=$(cat /tmp/token.txt) && curl -s -X GET \"\"http://localhost:5001/api/categorias\"\" -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -m json.tool')",
      "Bash(bash -c 'TOKEN=$(cat /tmp/token.txt) && curl -s -X GET \"\"http://localhost:5001/api/ubicaciones\"\" -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -m json.tool')",
      "Bash(node migrations/run-migration.js:*)",
      "Bash(bash -c 'TOKEN=$(curl -s -X POST http://localhost:5001/api/auth/login -H \"\"Content-Type: application/json\"\" -d \"\"{\\\"\"email\\\"\":\\\"\"admin@3g.com\\\"\",\\\"\"password\\\"\":\\\"\"admin123\\\"\"}\"\" | python3 -c \"\"import sys, json; print(json.load(sys.stdin)[\\\"\"data\\\"\"][\\\"\"token\\\"\"])\"\") && curl -s -X GET \"\"http://localhost:5001/api/auth/perfil\"\" -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -m json.tool')",
      "Bash(node scripts/crear-usuarios-prueba.js:*)",
      "Bash(node:*)",
      "Bash(bash -c 'TOKEN=$(curl -s -X POST http://localhost:5001/api/auth/login -H \"\"Content-Type: application/json\"\" -d \"\"{\\\"\"email\\\"\":\\\"\"dise√±ador@3g.com\\\"\",\\\"\"password\\\"\":\\\"\"dise√±ador123\\\"\"}\"\" | python3 -c \"\"import sys, json; print(json.load(sys.stdin)[\\\"\"data\\\"\"][\\\"\"token\\\"\"])\"\") && curl -s -X POST http://localhost:5001/api/pedidos -H \"\"Content-Type: application/json\"\" -H \"\"Authorization: Bearer $TOKEN\"\" -d \"\"{\\\"\"proyecto\\\"\":\\\"\"Proyecto Test\\\"\",\\\"\"observaciones\\\"\":\\\"\"Pedido de prueba\\\"\",\\\"\"articulos\\\"\":[{\\\"\"articulo_id\\\"\":1,\\\"\"cantidad\\\"\":10,\\\"\"observaciones\\\"\":\\\"\"Urgente\\\"\"},{\\\"\"articulo_id\\\"\":2,\\\"\"cantidad\\\"\":5}]}\"\" | python3 -m json.tool | head -50')",
      "Bash(TOKEN=\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6NCwiZW1haWwiOiJkaXNlw7FhZG9yQDNnLmNvbSIsInJvbCI6ImRpc2XDsWFkb3IiLCJpYXQiOjE3NjE3NDgwMDksImV4cCI6MTc2MjM1MjgwOX0.yA_HEw0GrOB0hXyCg07AaiAEJIRtdehqHPgQ1cn38E0\")",
      "Bash(bash -c 'TOKEN=$(curl -s -X POST http://localhost:5001/api/auth/login -H \"\"Content-Type: application/json\"\" -d \"\"{\\\"\"email\\\"\":\\\"\"dise√±ador@3g.com\\\"\",\\\"\"password\\\"\":\\\"\"dise√±ador123\\\"\"}\"\" | python3 -c \"\"import sys, json; print(json.load(sys.stdin)[\\\"\"data\\\"\"][\\\"\"token\\\"\"])\"\") && echo \"\"‚úÖ Token obtenido\"\" && curl -s -X GET \"\"http://localhost:5001/api/pedidos/pendientes\"\" -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -m json.tool | head -30')",
      "Bash(bash -c 'TOKEN=$(curl -s -X POST http://localhost:5001/api/auth/login -H \"\"Content-Type: application/json\"\" -d \"\"{\\\"\"email\\\"\":\\\"\"dise√±ador@3g.com\\\"\",\\\"\"password\\\"\":\\\"\"dise√±ador123\\\"\"}\"\" | python3 -c \"\"import sys, json; print(json.load(sys.stdin)[\\\"\"data\\\"\"][\\\"\"token\\\"\"])\"\") && curl -v -X GET \"\"http://localhost:5001/api/pedidos/pendientes\"\" -H \"\"Authorization: Bearer $TOKEN\"\" 2>&1 | head -40')",
      "Bash(bash -c 'TOKEN=$(curl -s -X POST http://localhost:5001/api/auth/login -H \"\"Content-Type: application/json\"\" -d \"\"{\\\"\"email\\\"\":\\\"\"dise√±ador@3g.com\\\"\",\\\"\"password\\\"\":\\\"\"dise√±ador123\\\"\"}\"\" | python3 -c \"\"import sys, json; print(json.load(sys.stdin)[\\\"\"data\\\"\"][\\\"\"token\\\"\"])\"\") && echo \"\"‚úÖ Token obtenido\"\" && echo -e \"\"\\nüìã Probando GET /api/pedidos/pendientes:\"\" && curl -s -X GET \"\"http://localhost:5001/api/pedidos/pendientes\"\" -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -m json.tool | head -40')",
      "Bash(bash -c 'TOKEN=$(curl -s -X POST http://localhost:5001/api/auth/login -H \"\"Content-Type: application/json\"\" -d \"\"{\\\"\"email\\\"\":\\\"\"dise√±ador@3g.com\\\"\",\\\"\"password\\\"\":\\\"\"dise√±ador123\\\"\"}\"\" | python3 -c \"\"import sys, json; print(json.load(sys.stdin)[\\\"\"data\\\"\"][\\\"\"token\\\"\"])\"\") && curl -s -X GET \"\"http://localhost:5001/api/pedidos/pendientes\"\" -H \"\"Authorization: Bearer $TOKEN\"\"')",
      "Bash(kill:*)",
      "Bash(bash -c 'TOKEN=$(curl -s -X POST http://localhost:5001/api/auth/login -H \"\"Content-Type: application/json\"\" -d \"\"{\\\"\"email\\\"\":\\\"\"dise√±ador@3g.com\\\"\",\\\"\"password\\\"\":\\\"\"dise√±ador123\\\"\"}\"\" | python3 -c \"\"import sys, json; print(json.load(sys.stdin)[\\\"\"data\\\"\"][\\\"\"token\\\"\"])\"\") && echo \"\"‚úÖ Token obtenido de dise√±ador\"\" && echo -e \"\"\\nüìã Probando GET /api/pedidos/pendientes:\"\" && curl -s -X GET \"\"http://localhost:5001/api/pedidos/pendientes\"\" -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -m json.tool | head -40')",
      "Bash(bash -c 'TOKEN=$(curl -s -X POST http://localhost:5001/api/auth/login -H \"\"Content-Type: application/json\"\" -d \"\"{\\\"\"email\\\"\":\\\"\"admin@3g.com\\\"\",\\\"\"password\\\"\":\\\"\"admin123\\\"\"}\"\" | python3 -c \"\"import sys, json; print(json.load(sys.stdin)[\\\"\"data\\\"\"][\\\"\"token\\\"\"])\"\") && echo \"\"‚úÖ Token de administrador obtenido\"\" && echo -e \"\"\\nüìã Probando GET /api/pedidos/pendientes:\"\" && curl -s -X GET \"\"http://localhost:5001/api/pedidos/pendientes\"\" -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -m json.tool | head -40')",
      "Bash(bash -c 'TOKEN=$(curl -s -X POST http://localhost:5001/api/auth/login -H \"\"Content-Type: application/json\"\" -d \"\"{\\\"\"email\\\"\":\\\"\"dise√±ador@3g.com\\\"\",\\\"\"password\\\"\":\\\"\"dise√±ador123\\\"\"}\"\" | python3 -c \"\"import sys, json; print(json.load(sys.stdin)[\\\"\"data\\\"\"][\\\"\"token\\\"\"])\"\") && echo \"\"‚úÖ Token de dise√±ador obtenido\"\" && echo -e \"\"\\nüìã Creando pedido de prueba:\"\" && curl -s -X POST \"\"http://localhost:5001/api/pedidos\"\" -H \"\"Content-Type: application/json\"\" -H \"\"Authorization: Bearer $TOKEN\"\" -d \"\"{\\\"\"proyecto\\\"\":\\\"\"Proyecto Test\\\"\",\\\"\"observaciones\\\"\":\\\"\"Pedido de prueba desde API\\\"\",\\\"\"articulos\\\"\":[{\\\"\"articulo_id\\\"\":1,\\\"\"cantidad\\\"\":5},{\\\"\"articulo_id\\\"\":2,\\\"\"cantidad\\\"\":10}]}\"\" | python3 -m json.tool | head -50')",
      "Bash(bash -c 'TOKEN=$(curl -s -X POST http://localhost:5001/api/auth/login -H \"\"Content-Type: application/json\"\" -d \"\"{\\\"\"email\\\"\":\\\"\"admin@3g.com\\\"\",\\\"\"password\\\"\":\\\"\"admin123\\\"\"}\"\" | python3 -c \"\"import sys, json; print(json.load(sys.stdin)[\\\"\"data\\\"\"][\\\"\"token\\\"\"])\"\") && echo \"\"‚úÖ Verificando pedidos pendientes:\"\" && curl -s -X GET \"\"http://localhost:5001/api/pedidos/pendientes\"\" -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -m json.tool | head -60')",
      "Bash(bash -c 'TOKEN=$(curl -s -X POST http://localhost:5001/api/auth/login -H \"\"Content-Type: application/json\"\" -d \"\"{\\\"\"email\\\"\":\\\"\"admin@3g.com\\\"\",\\\"\"password\\\"\":\\\"\"admin123\\\"\"}\"\" | python3 -c \"\"import sys, json; print(json.load(sys.stdin)[\\\"\"data\\\"\"][\\\"\"token\\\"\"])\"\") && curl -s -X GET \"\"http://localhost:5001/api/pedidos/pendientes\"\" -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -c \"\"import sys, json; data = json.load(sys.stdin); print(json.dumps(data, indent=2, ensure_ascii=False))\"\" | head -60')",
      "Bash(bash -c 'TOKEN=$(curl -s -X POST http://localhost:5001/api/auth/login -H \"\"Content-Type: application/json\"\" -d \"\"{\\\"\"email\\\"\":\\\"\"admin@3g.com\\\"\",\\\"\"password\\\"\":\\\"\"admin123\\\"\"}\"\" | python3 -c \"\"import sys, json; print(json.load(sys.stdin)[\\\"\"data\\\"\"][\\\"\"token\\\"\"])\"\") && curl -I -H \"\"Authorization: Bearer $TOKEN\"\" http://localhost:5001/api/pedidos/pendientes 2>&1 | grep -E \"\"(Content-Type|Cache-Control|Pragma)\"\"')",
      "Bash(bash -c 'TOKEN=$(curl -s -X POST http://localhost:5001/api/auth/login -H \"\"Content-Type: application/json\"\" -d \"\"{\\\"\"email\\\"\":\\\"\"admin@3g.com\\\"\",\\\"\"password\\\"\":\\\"\"admin123\\\"\"}\"\" | python3 -c \"\"import sys, json; print(json.load(sys.stdin)[\\\"\"data\\\"\"][\\\"\"token\\\"\"])\"\") && curl -I -H \"\"Authorization: Bearer $TOKEN\"\" http://localhost:5001/api/pedidos/pendientes 2>&1')",
      "Bash(bash -c 'TOKEN=$(curl -s -X POST http://localhost:5001/api/auth/login -H \"\"Content-Type: application/json\"\" -d \"\"{\\\"\"email\\\"\":\\\"\"admin@3g.com\\\"\",\\\"\"password\\\"\":\\\"\"admin123\\\"\"}\"\" | python3 -c \"\"import sys, json; print(json.load(sys.stdin)[\\\"\"data\\\"\"][\\\"\"token\\\"\"])\"\") && curl -s -X POST http://localhost:5001/api/articulos -H \"\"Content-Type: application/json\"\" -H \"\"Authorization: Bearer $TOKEN\"\" -d \"\"{\\\"\"nombre\\\"\":\\\"\"Art√≠culo de Prueba con Proveedor\\\"\",\\\"\"descripcion\\\"\":\\\"\"Art√≠culo de prueba con todos los campos nuevos\\\"\",\\\"\"categoria_id\\\"\":1,\\\"\"ubicacion_id\\\"\":1,\\\"\"proveedor_id\\\"\":1,\\\"\"stock_actual\\\"\":150,\\\"\"stock_minimo\\\"\":30,\\\"\"stock_maximo\\\"\":500,\\\"\"unidad\\\"\":\\\"\"piezas\\\"\",\\\"\"costo_unitario\\\"\":15.50}\"\" | python3 -m json.tool | head -50')",
      "Bash(bash -c 'echo \"\"iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNk+M9QDwADhgGAWjR9awAAAABJRU5ErkJggg==\"\" | base64 -d > /tmp/test-image.png && file /tmp/test-image.png')",
      "Bash(bash -c 'TOKEN=$(curl -s -X POST http://localhost:5001/api/auth/login -H \"\"Content-Type: application/json\"\" -d \"\"{\\\"\"email\\\"\":\\\"\"admin@3g.com\\\"\",\\\"\"password\\\"\":\\\"\"admin123\\\"\"}\"\" | python3 -c \"\"import sys, json; print(json.load(sys.stdin)[\\\"\"data\\\"\"][\\\"\"token\\\"\"])\"\") && curl -s -X POST http://localhost:5001/api/articulos/13/imagen -H \"\"Authorization: Bearer $TOKEN\"\" -F \"\"imagen=@/tmp/test-image.png\"\" | python3 -m json.tool')",
      "Bash(bash -c 'TOKEN=$(curl -s -X POST http://localhost:5001/api/auth/login -H \"\"Content-Type: application/json\"\" -d \"\"{\\\"\"email\\\"\":\\\"\"admin@3g.com\\\"\",\\\"\"password\\\"\":\\\"\"admin123\\\"\"}\"\" | python3 -c \"\"import sys, json; print(json.load(sys.stdin)[\\\"\"data\\\"\"][\\\"\"token\\\"\"])\"\") && curl -s -X GET http://localhost:5001/api/articulos/13 -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -c \"\"import sys, json; art = json.load(sys.stdin)[\\\"\"data\\\"\"]; print(f\\\"\"ID: {art[\\\"\"id\\\"\"]}\\\"\"); print(f\\\"\"Nombre: {art[\\\"\"nombre\\\"\"]}\\\"\"); print(f\\\"\"Proveedor: {art.get(\\\"\"proveedor\\\"\", {}).get(\\\"\"nombre\\\"\", \\\"\"N/A\\\"\")}\\\"\"); print(f\\\"\"Stock Actual: {art[\\\"\"stock_actual\\\"\"]}\\\"\"); print(f\\\"\"Stock M√≠nimo: {art[\\\"\"stock_minimo\\\"\"]}\\\"\"); print(f\\\"\"Stock M√°ximo: {art[\\\"\"stock_maximo\\\"\"]}\\\"\"); print(f\\\"\"Imagen URL: {art[\\\"\"imagen_url\\\"\"]}\\\"\");\"\"')",
      "Bash(bash -c 'TOKEN=$(curl -s -X POST http://localhost:5001/api/auth/login -H \"\"Content-Type: application/json\"\" -d \"\"{\\\"\"email\\\"\":\\\"\"admin@3g.com\\\"\",\\\"\"password\\\"\":\\\"\"admin123\\\"\"}\"\" | python3 -c \"\"import sys, json; print(json.load(sys.stdin)[\\\"\"data\\\"\"][\\\"\"token\\\"\"])\"\") && curl -s -X GET http://localhost:5001/api/articulos/13 -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -m json.tool | head -40')",
      "Bash(timeout 5 npm run dev:*)",
      "Bash(bash -c 'TOKEN=$(curl -s -X POST http://localhost:5001/api/auth/login -H \"\"Content-Type: application/json\"\" -d \"\"{\\\"\"email\\\"\":\\\"\"admin@3g.com\\\"\",\\\"\"password\\\"\":\\\"\"admin123\\\"\"}\"\" | python3 -c \"\"import sys, json; print(json.load(sys.stdin)[\\\"\"data\\\"\"][\\\"\"token\\\"\"])\"\") && curl -s -X GET http://localhost:5001/api/articulos/13 -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -m json.tool | head -30')",
      "Bash(bash -c 'convert -size 400x400 xc:blue -pointsize 72 -fill white -gravity center -annotate +0+0 \"\"TEST\"\" /tmp/test-image-400.jpg 2>/dev/null || echo \"\"ImageMagick no disponible, usando m√©todo alternativo\"\"')",
      "Bash(sips:*)",
      "Bash(bash -c 'TOKEN=$(curl -s -X POST http://localhost:5001/api/auth/login -H \"\"Content-Type: application/json\"\" -d \"\"{\\\"\"email\\\"\":\\\"\"admin@3g.com\\\"\",\\\"\"password\\\"\":\\\"\"admin123\\\"\"}\"\" | python3 -c \"\"import sys, json; print(json.load(sys.stdin)[\\\"\"data\\\"\"][\\\"\"token\\\"\"])\"\") && curl -s -X POST http://localhost:5001/api/articulos -H \"\"Content-Type: application/json\"\" -H \"\"Authorization: Bearer $TOKEN\"\" -d \"\"{\\\"\"nombre\\\"\":\\\"\"Art√≠culo con Imagen Grande\\\"\",\\\"\"descripcion\\\"\":\\\"\"Para probar visualizaci√≥n\\\"\",\\\"\"categoria_id\\\"\":1,\\\"\"ubicacion_id\\\"\":1,\\\"\"stock_actual\\\"\":100,\\\"\"stock_minimo\\\"\":20,\\\"\"unidad\\\"\":\\\"\"piezas\\\"\",\\\"\"costo_unitario\\\"\":10.00}\"\" | python3 -c \"\"import sys, json; print(json.load(sys.stdin)[\\\"\"data\\\"\"][\\\"\"articulo\\\"\"][\\\"\"id\\\"\"])\"\"')",
      "Bash(bash -c 'TOKEN=$(curl -s -X POST http://localhost:5001/api/auth/login -H \"\"Content-Type: application/json\"\" -d \"\"{\\\"\"email\\\"\":\\\"\"admin@3g.com\\\"\",\\\"\"password\\\"\":\\\"\"admin123\\\"\"}\"\" | python3 -c \"\"import sys, json; print(json.load(sys.stdin)[\\\"\"data\\\"\"][\\\"\"token\\\"\"])\"\") && curl -s -X POST http://localhost:5001/api/articulos/15/imagen -H \"\"Authorization: Bearer $TOKEN\"\" -F \"\"imagen=@/tmp/test-articulo.jpg\"\" | python3 -m json.tool')",
      "Bash(bash -c 'TOKEN=$(curl -s -X POST http://localhost:5001/api/auth/login -H \"\"Content-Type: application/json\"\" -d \"\"{\\\"\"email\\\"\":\\\"\"admin@3g.com\\\"\",\\\"\"password\\\"\":\\\"\"admin123\\\"\"}\"\" | python3 -c \"\"import sys, json; print(json.load(sys.stdin)[\\\"\"data\\\"\"][\\\"\"token\\\"\"])\"\") && curl -s -X GET http://localhost:5001/api/articulos/15 -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -m json.tool | head -25')",
      "Bash(bash -c 'TOKEN=$(cat /tmp/token-supervisor.txt) && echo \"\"=== TEST 1: Listar todos los equipos ===\"\" && curl -s -X GET http://localhost:5001/api/equipos -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -m json.tool | head -50')",
      "Bash(bash -c 'TOKEN=$(cat /tmp/token-supervisor.txt) && echo \"\"=== TEST 1: Listar todos los equipos ===\"\" && curl -s -X GET http://localhost:5001/api/equipos -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -m json.tool | head -60')",
      "Bash(bash -c 'TOKEN=$(cat /tmp/token-almacen.txt) && echo \"\"=== TEST 2: Almacenista crea pedido para Equipo Instalaci√≥n Norte ===\"\" && curl -s -X POST http://localhost:5001/api/pedidos -H \"\"Content-Type: application/json\"\" -H \"\"Authorization: Bearer $TOKEN\"\" -d \"\"{\\\"\"articulos\\\"\":[{\\\"\"articulo_id\\\"\":1,\\\"\"cantidad\\\"\":15},{\\\"\"articulo_id\\\"\":2,\\\"\"cantidad\\\"\":20}],\\\"\"equipo_id\\\"\":1,\\\"\"observaciones\\\"\":\\\"\"Material para obra zona norte\\\"\"}\"\" | python3 -m json.tool | head -80')",
      "Bash(bash -c 'TOKEN=$(cat /tmp/token-supervisor.txt) && echo \"\"=== TEST 3: Supervisor lista pedidos pendientes de aprobaci√≥n ===\"\" && curl -s -X GET http://localhost:5001/api/pedidos/aprobacion/pendientes -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -c \"\"import sys, json; data = json.load(sys.stdin); print(f\\\"\"Total pedidos pendientes: {len(data[\\\"\"data\\\"\"][\\\"\"pedidos\\\"\"])}\\\"\"); [print(f\\\"\"  - Pedido {p[\\\"\"ticket_id\\\"\"]} | Equipo: {p[\\\"\"equipo\\\"\"][\\\"\"nombre\\\"\"]} | Estado: {p[\\\"\"estado\\\"\"]}\\\"\") for p in data[\\\"\"data\\\"\"][\\\"\"pedidos\\\"\"]]\"\"')",
      "Bash(bash -c 'TOKEN=$(cat /tmp/token-supervisor.txt) && echo \"\"=== TEST 4: Supervisor aprueba el pedido ===\"\" && curl -s -X PUT http://localhost:5001/api/pedidos/16/aprobar -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -c \"\"import sys, json; data = json.load(sys.stdin); pedido = data[\\\"\"data\\\"\"][\\\"\"pedido\\\"\"]; print(f\\\"\"‚úÖ Pedido {pedido[\\\"\"ticket_id\\\"\"]}\\\"\"); print(f\\\"\"   Estado: {pedido[\\\"\"estado\\\"\"]}\\\"\"); print(f\\\"\"   Aprobado por: {pedido[\\\"\"aprobadoPor\\\"\"][\\\"\"nombre\\\"\"]}\\\"\"); print(f\\\"\"   Fecha aprobaci√≥n: {pedido[\\\"\"fecha_aprobacion\\\"\"]}\\\"\"); print(f\\\"\"   Equipo: {pedido[\\\"\"equipo\\\"\"][\\\"\"nombre\\\"\"]}\\\"\")\"\"')",
      "Bash(bash -c 'TOKEN=$(cat /tmp/token-almacen.txt) && echo \"\"=== TEST 5: Crear pedido para probar rechazo ===\"\" && curl -s -X POST http://localhost:5001/api/pedidos -H \"\"Content-Type: application/json\"\" -H \"\"Authorization: Bearer $TOKEN\"\" -d \"\"{\\\"\"articulos\\\"\":[{\\\"\"articulo_id\\\"\":3,\\\"\"cantidad\\\"\":10}],\\\"\"equipo_id\\\"\":2,\\\"\"observaciones\\\"\":\\\"\"Material para equipo sur\\\"\"}\"\" | python3 -c \"\"import sys, json; data = json.load(sys.stdin); print(f\\\"\"Pedido creado: {data[\\\"\"data\\\"\"][\\\"\"pedido\\\"\"][\\\"\"ticket_id\\\"\"]} - Estado: {data[\\\"\"data\\\"\"][\\\"\"pedido\\\"\"][\\\"\"estado\\\"\"]}\\\"\")\"\" && echo \"\"\"\" && echo \"\"=== TEST 6: Supervisor rechaza el pedido ===\"\" && sleep 1 && TOKEN_SUP=$(cat /tmp/token-supervisor.txt) && curl -s -X PUT http://localhost:5001/api/pedidos/17/rechazar -H \"\"Content-Type: application/json\"\" -H \"\"Authorization: Bearer $TOKEN_SUP\"\" -d \"\"{\\\"\"motivo_rechazo\\\"\":\\\"\"No hay presupuesto aprobado para este material\\\"\"}\"\" | python3 -c \"\"import sys, json; data = json.load(sys.stdin); pedido = data[\\\"\"data\\\"\"][\\\"\"pedido\\\"\"]; print(f\\\"\"‚ùå Pedido {pedido[\\\"\"ticket_id\\\"\"]}\\\"\"); print(f\\\"\"   Estado: {pedido[\\\"\"estado\\\"\"]}\\\"\"); print(f\\\"\"   Rechazado por: {pedido[\\\"\"aprobadoPor\\\"\"][\\\"\"nombre\\\"\"]}\\\"\"); print(f\\\"\"   Motivo: {pedido[\\\"\"motivo_rechazo\\\"\"]}\\\"\")\"\"')",
      "Bash(bash -c 'TOKEN=$(curl -s -X POST http://localhost:5001/api/auth/login -H \"\"Content-Type: application/json\"\" -d \"\"{\\\"\"email\\\"\":\\\"\"admin@3g.com\\\"\",\\\"\"password\\\"\":\\\"\"admin123\\\"\"}\"\" | python3 -c \"\"import sys, json; print(json.load(sys.stdin)[\\\"\"data\\\"\"][\\\"\"token\\\"\"])\"\") && curl -s -X GET \"\"http://localhost:5001/api/usuarios\"\" -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -m json.tool | head -60')",
      "Bash(bash -c 'TOKEN=$(curl -s -X POST http://localhost:5001/api/auth/login -H \"\"Content-Type: application/json\"\" -d \"\"{\\\"\"email\\\"\":\\\"\"admin@3g.com\\\"\",\\\"\"password\\\"\":\\\"\"admin123\\\"\"}\"\" | python3 -c \"\"import sys, json; print(json.load(sys.stdin)[\\\"\"data\\\"\"][\\\"\"token\\\"\"])\"\") && curl -s -X GET \"\"http://localhost:5001/api/usuarios\"\" -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -m json.tool | head -80')",
      "Bash(bash -c 'TOKEN=$(curl -s -X POST http://localhost:5001/api/auth/login -H \"\"Content-Type: application/json\"\" -d \"\"{\\\"\"email\\\"\":\\\"\"admin@3g.com\\\"\",\\\"\"password\\\"\":\\\"\"admin123\\\"\"}\"\" | python3 -c \"\"import sys, json; print(json.load(sys.stdin)[\\\"\"data\\\"\"][\\\"\"token\\\"\"])\"\") && curl -s -X GET \"\"http://localhost:5001/api/usuarios/supervisores\"\" -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -m json.tool')",
      "Bash(bash -c 'TOKEN=$(curl -s -X POST http://localhost:5001/api/auth/login -H \"\"Content-Type: application/json\"\" -d \"\"{\\\"\"email\\\"\":\\\"\"admin@3g.com\\\"\",\\\"\"password\\\"\":\\\"\"admin123\\\"\"}\"\" | python3 -c \"\"import sys, json; print(json.load(sys.stdin)[\\\"\"data\\\"\"][\\\"\"token\\\"\"])\"\") && curl -s -X GET \"\"http://localhost:5001/api/usuarios\"\" -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -c \"\"import sys, json; data = json.load(sys.stdin); usuarios = data[\\\"\"data\\\"\"][\\\"\"usuarios\\\"\"]; print(\\\"\"=== USUARIOS CON TODOS LOS ROLES ===\\\"\"); [print(f\\\"\"ID: {u[\\\"\"id\\\"\"]:2} | Rol: {u[\\\"\"rol\\\"\"]:15} | {u[\\\"\"nombre\\\"\"]}\\\"\") for u in usuarios]; print(f\\\"\"\\nTotal de usuarios: {len(usuarios)}\\\"\")\"\"')",
      "Bash(bash -c 'TOKEN=$(curl -s -X POST http://localhost:5001/api/auth/login -H \"\"Content-Type: application/json\"\" -d \"\"{\\\"\"email\\\"\":\\\"\"almacen@3g.com\\\"\",\\\"\"password\\\"\":\\\"\"almacen123\\\"\"}\"\" | python3 -c \"\"import sys, json; print(json.load(sys.stdin)[\\\"\"data\\\"\"][\\\"\"token\\\"\"])\"\") && echo \"\"‚úÖ Token almacenista obtenido\"\" && echo \"\"\"\" && echo \"\"=== Creando pedido para equipo ===\"\" && curl -s -X POST http://localhost:5001/api/pedidos -H \"\"Content-Type: application/json\"\" -H \"\"Authorization: Bearer $TOKEN\"\" -d \"\"{\\\"\"articulos\\\"\":[{\\\"\"articulo_id\\\"\":1,\\\"\"cantidad\\\"\":5}],\\\"\"equipo_id\\\"\":1,\\\"\"observaciones\\\"\":\\\"\"Pedido de prueba para equipo\\\"\"}\"\" | python3 -c \"\"import sys, json; data = json.load(sys.stdin); pedido = data[\\\"\"data\\\"\"][\\\"\"pedido\\\"\"]; print(f\\\"\"Pedido creado: {pedido[\\\"\"ticket_id\\\"\"]}\\\"\"); print(f\\\"\"Estado: {pedido[\\\"\"estado\\\"\"]}\\\"\"); print(f\\\"\"Tipo: {pedido[\\\"\"tipo_pedido\\\"\"]}\\\"\"); print(f\\\"\"Equipo ID: {pedido.get(\\\"\"equipo_id\\\"\", \\\"\"N/A\\\"\")}\\\"\")\"\"')",
      "Bash(bash -c 'TOKEN=$(curl -s -X POST http://localhost:5001/api/auth/login -H \"\"Content-Type: application/json\"\" -d \"\"{\\\"\"email\\\"\":\\\"\"supervisor@3g.com\\\"\",\\\"\"password\\\"\":\\\"\"supervisor123\\\"\"}\"\" | python3 -c \"\"import sys, json; print(json.load(sys.stdin)[\\\"\"data\\\"\"][\\\"\"token\\\"\"])\"\") && echo \"\"‚úÖ Token supervisor obtenido\"\" && echo \"\"\"\" && echo \"\"=== Verificando pedidos pendientes de aprobaci√≥n ===\"\" && curl -s -X GET \"\"http://localhost:5001/api/pedidos/aprobacion/pendientes\"\" -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -c \"\"import sys, json; data = json.load(sys.stdin); pedidos = data[\\\"\"data\\\"\"][\\\"\"pedidos\\\"\"]; print(f\\\"\"Total pedidos pendientes: {len(pedidos)}\\\"\"); [print(f\\\"\"  - {p[\\\"\"ticket_id\\\"\"]} | Estado: {p[\\\"\"estado\\\"\"]} | Equipo: {p.get(\\\"\"equipo\\\"\", {}).get(\\\"\"nombre\\\"\", \\\"\"N/A\\\"\")}\\\"\") for p in pedidos]\"\"')",
      "Bash(bash -c 'TOKEN=$(curl -s -X POST http://localhost:5001/api/auth/login -H \"\"Content-Type: application/json\"\" -d \"\"{\\\"\"email\\\"\":\\\"\"dise√±ador@3g.com\\\"\",\\\"\"password\\\"\":\\\"\"dise√±ador123\\\"\"}\"\" | python3 -c \"\"import sys, json; print(json.load(sys.stdin)[\\\"\"data\\\"\"][\\\"\"token\\\"\"])\"\") && echo \"\"‚úÖ Token de dise√±ador obtenido\"\" && echo \"\"\"\" && echo \"\"=== TEST 1: Dise√±ador crea orden de compra con art√≠culos SIN stock suficiente ===\"\" && curl -s -X POST \"\"http://localhost:5001/api/ordenes-compra\"\" -H \"\"Content-Type: application/json\"\" -H \"\"Authorization: Bearer $TOKEN\"\" -d \"\"{\\\"\"articulos\\\"\":[{\\\"\"articulo_id\\\"\":1,\\\"\"cantidad\\\"\":500},{\\\"\"articulo_id\\\"\":2,\\\"\"cantidad\\\"\":300}],\\\"\"proveedor_id\\\"\":1,\\\"\"observaciones\\\"\":\\\"\"Orden de prueba dise√±ador con faltantes\\\"\"}\"\" | python3 -m json.tool | head -80')",
      "Bash(bash -c 'TOKEN=$(curl -s -X POST http://localhost:5001/api/auth/login -H \"\"Content-Type: application/json\"\" -d \"\"{\\\"\"email\\\"\":\\\"\"dise√±ador@3g.com\\\"\",\\\"\"password\\\"\":\\\"\"dise√±ador123\\\"\"}\"\" | python3 -c \"\"import sys, json; print(json.load(sys.stdin)[\\\"\"data\\\"\"][\\\"\"token\\\"\"])\"\") && echo \"\"‚úÖ Token de dise√±ador obtenido\"\" && echo \"\"\"\" && echo \"\"=== TEST 1: Dise√±ador crea orden de compra con art√≠culos SIN stock suficiente ===\"\" && curl -s -X POST \"\"http://localhost:5001/api/ordenes-compra\"\" -H \"\"Content-Type: application/json\"\" -H \"\"Authorization: Bearer $TOKEN\"\" -d \"\"{\\\"\"articulos\\\"\":[{\\\"\"articulo_id\\\"\":1,\\\"\"cantidad\\\"\":500},{\\\"\"articulo_id\\\"\":2,\\\"\"cantidad\\\"\":300}],\\\"\"proveedor_id\\\"\":1,\\\"\"observaciones\\\"\":\\\"\"Orden de prueba dise√±ador con faltantes\\\"\"}\"\" | python3 -m json.tool | head -100')",
      "Bash(bash -c 'TOKEN=$(curl -s -X POST http://localhost:5001/api/auth/login -H \"\"Content-Type: application/json\"\" -d \"\"{\\\"\"email\\\"\":\\\"\"admin@3g.com\\\"\",\\\"\"password\\\"\":\\\"\"admin123\\\"\"}\"\" | python3 -c \"\"import sys, json; print(json.load(sys.stdin)[\\\"\"data\\\"\"][\\\"\"token\\\"\"])\"\") && echo \"\"=== Verificando solicitudes de compra pendientes ===\"\" && curl -s -X GET \"\"http://localhost:5001/api/solicitudes-compra?estado=pendiente\"\" -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -c \"\"import sys, json; data = json.load(sys.stdin); solicitudes = data[\\\"\"data\\\"\"][\\\"\"solicitudes\\\"\"]; print(f\\\"\"Total solicitudes pendientes: {len(solicitudes)}\\\"\"); print(\\\"\"\\\"\"); [print(f\\\"\"‚úÖ {s[\\\"\"ticket_id\\\"\"]}\\\"\"); print(f\\\"\"   Art√≠culo: {s[\\\"\"articulo\\\"\"][\\\"\"nombre\\\"\"]}\\\"\"); print(f\\\"\"   Cantidad: {s[\\\"\"cantidad_solicitada\\\"\"]} {s[\\\"\"articulo\\\"\"][\\\"\"unidad\\\"\"]}\\\"\"); print(f\\\"\"   Prioridad: {s[\\\"\"prioridad\\\"\"]}\\\"\"); print(f\\\"\"   Motivo: {s[\\\"\"motivo\\\"\"][:80]}...\\\"\"); print(\\\"\"\\\"\") for s in solicitudes]\"\"')",
      "Bash(bash -c 'TOKEN=$(curl -s -X POST http://localhost:5001/api/auth/login -H \"\"Content-Type: application/json\"\" -d \"\"{\\\"\"email\\\"\":\\\"\"admin@3g.com\\\"\",\\\"\"password\\\"\":\\\"\"admin123\\\"\"}\"\" | python3 -c \"\"import sys, json; print(json.load(sys.stdin)[\\\"\"data\\\"\"][\\\"\"token\\\"\"])\"\") && echo \"\"=== Verificando solicitudes de compra pendientes ===\"\" && curl -s -X GET \"\"http://localhost:5001/api/solicitudes-compra?estado=pendiente\"\" -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -m json.tool | head -100')",
      "Bash(bash -c 'TOKEN=$(curl -s -X POST http://localhost:5001/api/auth/login -H \"\"Content-Type: application/json\"\" -d \"\"{\\\"\"email\\\"\":\\\"\"almacen@3g.com\\\"\",\\\"\"password\\\"\":\\\"\"almacen123\\\"\"}\"\" | python3 -c \"\"import sys, json; print(json.load(sys.stdin)[\\\"\"data\\\"\"][\\\"\"token\\\"\"])\"\") && echo \"\"‚úÖ Token de almacenista obtenido\"\" && echo \"\"\"\" && echo \"\"=== TEST 2: Almacenista crea orden de compra ===\"\" && curl -s -X POST \"\"http://localhost:5001/api/ordenes-compra\"\" -H \"\"Content-Type: application/json\"\" -H \"\"Authorization: Bearer $TOKEN\"\" -d \"\"{\\\"\"articulos\\\"\":[{\\\"\"articulo_id\\\"\":3,\\\"\"cantidad\\\"\":50}],\\\"\"proveedor_id\\\"\":1,\\\"\"observaciones\\\"\":\\\"\"Orden normal de almacenista\\\"\"}\"\" | python3 -m json.tool | head -60')",
      "Bash(bash -c 'TOKEN=$(curl -s -X POST http://localhost:5001/api/auth/login -H \"\"Content-Type: application/json\"\" -d \"\"{\\\"\"email\\\"\":\\\"\"admin@3g.com\\\"\",\\\"\"password\\\"\":\\\"\"admin123\\\"\"}\"\" | python3 -c \"\"import sys, json; print(json.load(sys.stdin)[\\\"\"data\\\"\"][\\\"\"token\\\"\"])\"\") && echo \"\"Token obtenido\"\" && curl -s -X PUT \"\"http://localhost:5001/api/articulos/15\"\" -H \"\"Content-Type: application/json\"\" -H \"\"Authorization: Bearer $TOKEN\"\" -d \"\"{\\\"\"nombre\\\"\":\\\"\"Art√≠culo Actualizado TEST\\\"\",\\\"\"descripcion\\\"\":\\\"\"Nueva descripci√≥n\\\"\",\\\"\"categoria_id\\\"\":1,\\\"\"ubicacion_id\\\"\":1,\\\"\"stock_actual\\\"\":999,\\\"\"stock_minimo\\\"\":50,\\\"\"costo_unitario\\\"\":99.99}\"\" | python3 -m json.tool')",
      "Bash(bash -c 'TOKEN=$(curl -s -X POST http://localhost:5001/api/auth/login -H \"\"Content-Type: application/json\"\" -d \"\"{\\\"\"email\\\"\":\\\"\"admin@3g.com\\\"\",\\\"\"password\\\"\":\\\"\"admin123\\\"\"}\"\" | python3 -c \"\"import sys, json; print(json.load(sys.stdin)[\\\"\"data\\\"\"][\\\"\"token\\\"\"])\"\") && echo \"\"‚úÖ Token obtenido\"\" && echo \"\"\"\" && echo \"\"=== Consultando stock actual del art√≠culo 1 ===\"\" && curl -s -X GET \"\"http://localhost:5001/api/articulos/1\"\" -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -c \"\"import sys, json; art = json.load(sys.stdin)[\\\"\"data\\\"\"]; print(f\\\"\"Art√≠culo: {art[\\\"\"nombre\\\"\"]}\\\"\"); print(f\\\"\"Stock actual: {art[\\\"\"stock_actual\\\"\"]} {art[\\\"\"unidad\\\"\"]}\\\"\"); art_id = art[\\\"\"id\\\"\"]; stock_antes = art[\\\"\"stock_actual\\\"\"]\"\"')",
      "Bash(bash -c 'TOKEN=$(curl -s -X POST http://localhost:5001/api/auth/login -H \"\"Content-Type: application/json\"\" -d \"\"{\\\"\"email\\\"\":\\\"\"admin@3g.com\\\"\",\\\"\"password\\\"\":\\\"\"admin123\\\"\"}\"\" | python3 -c \"\"import sys, json; print(json.load(sys.stdin)[\\\"\"data\\\"\"][\\\"\"token\\\"\"])\"\") && echo \"\"=== Consultando stock actual del art√≠culo 15 ===\"\" && curl -s -X GET \"\"http://localhost:5001/api/articulos/15\"\" -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -c \"\"import sys, json; art = json.load(sys.stdin)[\\\"\"data\\\"\"][\\\"\"articulo\\\"\"]; print(f\\\"\"Art√≠culo: {art[\\\"\"nombre\\\"\"]}\\\"\"); print(f\\\"\"Stock actual: {art[\\\"\"stock_actual\\\"\"]} {art[\\\"\"unidad\\\"\"]}\\\"\"); print(f\\\"\"ID: {art[\\\"\"id\\\"\"]}\\\"\")\"\"')",
      "Bash(bash -c 'TOKEN=$(curl -s -X POST http://localhost:5001/api/auth/login -H \"\"Content-Type: application/json\"\" -d \"\"{\\\"\"email\\\"\":\\\"\"admin@3g.com\\\"\",\\\"\"password\\\"\":\\\"\"admin123\\\"\"}\"\" | python3 -c \"\"import sys, json; print(json.load(sys.stdin)[\\\"\"data\\\"\"][\\\"\"token\\\"\"])\"\") && echo \"\"=== Registrando entrada de 50 unidades al art√≠culo 15 ===\"\" && curl -s -X POST \"\"http://localhost:5001/api/movimientos\"\" -H \"\"Content-Type: application/json\"\" -H \"\"Authorization: Bearer $TOKEN\"\" -d \"\"{\\\"\"tipo\\\"\":\\\"\"entrada\\\"\",\\\"\"articulos\\\"\":[{\\\"\"articulo_id\\\"\":15,\\\"\"cantidad\\\"\":50,\\\"\"observaciones\\\"\":\\\"\"Entrada de prueba\\\"\"}],\\\"\"observaciones\\\"\":\\\"\"Entrada de inventario de prueba\\\"\"}\"\" | python3 -m json.tool | head -60')",
      "Bash(bash -c 'TOKEN=$(curl -s -X POST http://localhost:5001/api/auth/login -H \"\"Content-Type: application/json\"\" -d \"\"{\\\"\"email\\\"\":\\\"\"admin@3g.com\\\"\",\\\"\"password\\\"\":\\\"\"admin123\\\"\"}\"\" | python3 -c \"\"import sys, json; print(json.load(sys.stdin)[\\\"\"data\\\"\"][\\\"\"token\\\"\"])\"\") && echo \"\"=== Stock ANTES del art√≠culo 15 ===\"\" && curl -s -X GET \"\"http://localhost:5001/api/articulos/15\"\" -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -c \"\"import sys, json; art = json.load(sys.stdin)[\\\"\"data\\\"\"][\\\"\"articulo\\\"\"]; print(f\\\"\"Stock actual: {art[\\\"\"stock_actual\\\"\"]} {art[\\\"\"unidad\\\"\"]}\\\"\")\"\" && echo \"\"\"\" && echo \"\"=== Registrando entrada de 50 unidades ===\"\" && curl -s -X POST \"\"http://localhost:5001/api/movimientos\"\" -H \"\"Content-Type: application/json\"\" -H \"\"Authorization: Bearer $TOKEN\"\" -d \"\"{\\\"\"tipo\\\"\":\\\"\"ajuste_entrada\\\"\",\\\"\"articulos\\\"\":[{\\\"\"articulo_id\\\"\":15,\\\"\"cantidad\\\"\":50,\\\"\"observaciones\\\"\":\\\"\"Entrada de prueba\\\"\"}],\\\"\"observaciones\\\"\":\\\"\"Entrada de inventario de prueba\\\"\"}\"\" | python3 -c \"\"import sys, json; resp = json.load(sys.stdin); print(f\\\"\"Success: {resp[\\\"\"success\\\"\"]}\\\"\"); print(f\\\"\"Message: {resp[\\\"\"message\\\"\"]}\\\"\")\"\" && echo \"\"\"\" && echo \"\"=== Stock DESPU√âS del art√≠culo 15 ===\"\" && curl -s -X GET \"\"http://localhost:5001/api/articulos/15\"\" -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -c \"\"import sys, json; art = json.load(sys.stdin)[\\\"\"data\\\"\"][\\\"\"articulo\\\"\"]; print(f\\\"\"Stock actual: {art[\\\"\"stock_actual\\\"\"]} {art[\\\"\"unidad\\\"\"]}\\\"\");\"\"')",
      "Bash(bash -c 'TOKEN=$(curl -s -X POST http://localhost:5001/api/auth/login -H \"\"Content-Type: application/json\"\" -d \"\"{\\\"\"email\\\"\":\\\"\"admin@3g.com\\\"\",\\\"\"password\\\"\":\\\"\"admin123\\\"\"}\"\" | python3 -c \"\"import sys, json; print(json.load(sys.stdin)[\\\"\"data\\\"\"][\\\"\"token\\\"\"])\"\") && echo \"\"=== Creando art√≠culo de prueba para eliminar ===\"\" && ARTICULO_ID=$(curl -s -X POST \"\"http://localhost:5001/api/articulos\"\" -H \"\"Content-Type: application/json\"\" -H \"\"Authorization: Bearer $TOKEN\"\" -d \"\"{\\\"\"nombre\\\"\":\\\"\"Art√≠culo de Prueba a Eliminar\\\"\",\\\"\"descripcion\\\"\":\\\"\"Este art√≠culo ser√° eliminado\\\"\",\\\"\"categoria_id\\\"\":1,\\\"\"ubicacion_id\\\"\":1,\\\"\"stock_actual\\\"\":10,\\\"\"stock_minimo\\\"\":5,\\\"\"unidad\\\"\":\\\"\"piezas\\\"\",\\\"\"costo_unitario\\\"\":1.5}\"\"| python3 -c \"\"import sys, json; print(json.load(sys.stdin)[\\\"\"data\\\"\"][\\\"\"articulo\\\"\"][\\\"\"id\\\"\"])\"\") && echo \"\"Art√≠culo creado con ID: $ARTICULO_ID\"\" && echo \"\"\"\" && echo \"\"=== Verificando art√≠culo activo ===\"\" && curl -s -X GET \"\"http://localhost:5001/api/articulos/$ARTICULO_ID\"\" -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -c \"\"import sys, json; art = json.load(sys.stdin)[\\\"\"data\\\"\"][\\\"\"articulo\\\"\"]; print(f\\\"\"Art√≠culo: {art[\\\"\"nombre\\\"\"]}\\\"\"); print(f\\\"\"Activo: {art[\\\"\"activo\\\"\"]}\\\"\")\"\" && echo \"\"\"\" && echo \"\"=== Eliminando art√≠culo ===\"\" && curl -s -X DELETE \"\"http://localhost:5001/api/articulos/$ARTICULO_ID\"\" -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -c \"\"import sys, json; resp = json.load(sys.stdin); print(f\\\"\"Success: {resp[\\\"\"success\\\"\"]}\\\"\"); print(f\\\"\"Message: {resp[\\\"\"message\\\"\"]}\\\"\")\"\" && echo \"\"\"\" && echo \"\"=== Verificando art√≠culo despu√©s de eliminar ===\"\" && curl -s -X GET \"\"http://localhost:5001/api/articulos/$ARTICULO_ID\"\" -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -c \"\"import sys, json; art = json.load(sys.stdin)[\\\"\"data\\\"\"][\\\"\"articulo\\\"\"]; print(f\\\"\"Art√≠culo: {art[\\\"\"nombre\\\"\"]}\\\"\"); print(f\\\"\"Activo: {art[\\\"\"activo\\\"\"]}\\\"\");\"\"')",
      "Bash(bash -c 'TOKEN=$(curl -s -X POST http://localhost:5001/api/auth/login -H \"\"Content-Type: application/json\"\" -d \"\"{\\\"\"email\\\"\":\\\"\"admin@3g.com\\\"\",\\\"\"password\\\"\":\\\"\"admin123\\\"\"}\"\" | python3 -c \"\"import sys, json; print(json.load(sys.stdin)[\\\"\"data\\\"\"][\\\"\"token\\\"\"])\"\") && echo \"\"‚úÖ Token obtenido\"\" && echo \"\"\"\" && echo \"\"=== Verificando que existe el endpoint /api/articulos/ean13/:codigo ===\"\" && curl -s -X GET \"\"http://localhost:5001/api/articulos/ean13/2000000000015\"\" -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -m json.tool | head -30')",
      "Bash(bash -c 'TOKEN=$(curl -s -X POST http://localhost:5001/api/auth/login -H \"\"Content-Type: application/json\"\" -d \"\"{\\\"\"email\\\"\":\\\"\"admin@3g.com\\\"\",\\\"\"password\\\"\":\\\"\"admin123\\\"\"}\"\" | python3 -c \"\"import sys, json; print(json.load(sys.stdin)[\\\"\"data\\\"\"][\\\"\"token\\\"\"])\"\") && curl -s -X GET \"\"http://localhost:5001/api/articulos?activo=true\"\" -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -c \"\"import sys, json; data = json.load(sys.stdin); print(f\\\"\"‚úÖ Backend funcionando correctamente\\\"\"); print(f\\\"\"Total art√≠culos activos: {len(data[\\\"\"data\\\"\"][\\\"\"articulos\\\"\"])}\\\"\")\"\"')",
      "Bash(git checkout:*)",
      "Bash(bash -c 'TOKEN=$(curl -s -X POST http://localhost:5001/api/auth/login -H \"\"Content-Type: application/json\"\" -d \"\"{\\\"\"email\\\"\":\\\"\"admin@3g.com\\\"\",\\\"\"password\\\"\":\\\"\"admin123\\\"\"}\"\" | python3 -c \"\"import sys, json; print(json.load(sys.stdin)[\\\"\"data\\\"\"][\\\"\"token\\\"\"])\"\") && curl -s -X GET \"\"http://localhost:5001/api/pedidos/supervisores\"\" -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -m json.tool')",
      "Bash(bash -c 'TOKEN=$(curl -s -X POST http://localhost:5001/api/auth/login -H \"\"Content-Type: application/json\"\" -d \"\"{\\\"\"email\\\"\":\\\"\"dise√±ador@3g.com\\\"\",\\\"\"password\\\"\":\\\"\"dise√±ador123\\\"\"}\"\" | python3 -c \"\"import sys, json; print(json.load(sys.stdin)[\\\"\"data\\\"\"][\\\"\"token\\\"\"])\"\") && echo \"\"‚úÖ Token de dise√±ador obtenido\"\" && echo \"\"$TOKEN\"\" > /tmp/token-disenador.txt && echo \"\"\"\" && echo \"\"=== Verificando art√≠culos disponibles ===\"\" && curl -s -X GET \"\"http://localhost:5001/api/articulos?activo=true\"\" -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -c \"\"import sys, json; data = json.load(sys.stdin); articulos = data[\\\"\"data\\\"\"][\\\"\"articulos\\\"\"]; print(f\\\"\"Total art√≠culos activos: {len(articulos)}\\\"\"); print(\\\"\"\\nPrimeros 3 art√≠culos:\\\"\"); [print(f\\\"\"  ID: {a[\\\"\"id\\\"\"]:2} | Stock: {a[\\\"\"stock_actual\\\"\"]:6} | M√≠nimo: {a[\\\"\"stock_minimo\\\"\"]:6} | M√°ximo: {a.get(\\\"\"stock_maximo\\\"\", \\\"\"N/A\\\"\"):6} | {a[\\\"\"nombre\\\"\"]}\\\"\") for a in articulos[:3]]\"\"')",
      "Bash(bash -c 'TOKEN=$(cat /tmp/token-disenador.txt) && echo \"\"=== TEST: Dise√±ador crea pedido con art√≠culo de bajo stock ===\"\" && echo \"\"\"\" && echo \"\"üìä Stock ANTES del pedido:\"\" && curl -s -X GET \"\"http://localhost:5001/api/articulos/22\"\" -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -c \"\"import sys, json; art = json.load(sys.stdin)[\\\"\"data\\\"\"][\\\"\"articulo\\\"\"]; print(f\\\"\"  ID: {art[\\\"\"id\\\"\"]} | Nombre: {art[\\\"\"nombre\\\"\"]}\\\"\"); print(f\\\"\"  Stock actual: {art[\\\"\"stock_actual\\\"\"]} {art[\\\"\"unidad\\\"\"]}\\\"\"); print(f\\\"\"  Stock m√≠nimo: {art[\\\"\"stock_minimo\\\"\"]} {art[\\\"\"unidad\\\"\"]}\\\"\"); print(f\\\"\"  Stock m√°ximo: {art.get(\\\"\"stock_maximo\\\"\", \\\"\"N/A\\\"\")} {art[\\\"\"unidad\\\"\"]}\\\"\")\"\" && echo \"\"\"\" && echo \"\"üì¶ Creando pedido con cantidad que dejar√° stock bajo m√≠nimo...\"\" && curl -s -X POST \"\"http://localhost:5001/api/pedidos\"\" -H \"\"Content-Type: application/json\"\" -H \"\"Authorization: Bearer $TOKEN\"\" -d \"\"{\\\"\"articulos\\\"\":[{\\\"\"articulo_id\\\"\":22,\\\"\"cantidad\\\"\":5}],\\\"\"proyecto\\\"\":\\\"\"Proyecto Test - Stock Bajo\\\"\",\\\"\"observaciones\\\"\":\\\"\"Pedido de prueba para generar solicitud de compra\\\"\"}\"\" | python3 -m json.tool | head -80')",
      "Bash(bash -c 'TOKEN=$(cat /tmp/token-disenador.txt) && echo \"\"=== TEST: Dise√±ador crea pedido con art√≠culo que dejar√° stock negativo ===\"\" && echo \"\"\"\" && echo \"\"üìä Stock ANTES del pedido:\"\" && curl -s -X GET \"\"http://localhost:5001/api/articulos/22\"\" -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -c \"\"import sys, json; art = json.load(sys.stdin)[\\\"\"data\\\"\"][\\\"\"articulo\\\"\"]; print(f\\\"\"  ID: {art[\\\"\"id\\\"\"]} | Nombre: {art[\\\"\"nombre\\\"\"]}\\\"\"); print(f\\\"\"  Stock actual: {art[\\\"\"stock_actual\\\"\"]} {art[\\\"\"unidad\\\"\"]}\\\"\"); print(f\\\"\"  Stock m√≠nimo: {art[\\\"\"stock_minimo\\\"\"]} {art[\\\"\"unidad\\\"\"]}\\\"\"); print(f\\\"\"  Stock m√°ximo: {art.get(\\\"\"stock_maximo\\\"\", \\\"\"N/A\\\"\")}\\\"\"); stock_inicial = float(art[\\\"\"stock_actual\\\"\"])\"\" && echo \"\"\"\" && echo \"\"üì¶ Creando pedido con cantidad 5 (dejar√° stock en -4)...\"\" && curl -s -X POST \"\"http://localhost:5001/api/pedidos\"\" -H \"\"Content-Type: application/json\"\" -H \"\"Authorization: Bearer $TOKEN\"\" -d \"\"{\\\"\"articulos\\\"\":[{\\\"\"articulo_id\\\"\":22,\\\"\"cantidad\\\"\":5}],\\\"\"proyecto\\\"\":\\\"\"Proyecto Test - Stock Negativo\\\"\",\\\"\"observaciones\\\"\":\\\"\"Pedido de prueba para generar solicitud de compra\\\"\"}\"\" | python3 -m json.tool')",
      "Bash(bash -c 'TOKEN=$(cat /tmp/token-disenador.txt) && echo \"\"=== TEST FINAL: Verificando resultado del pedido anterior ===\"\" && echo \"\"\"\" && echo \"\"üìä Stock DESPU√âS del pedido anterior:\"\" && curl -s -X GET \"\"http://localhost:5001/api/articulos/22\"\" -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -c \"\"import sys, json; art = json.load(sys.stdin)[\\\"\"data\\\"\"][\\\"\"articulo\\\"\"]; print(f\\\"\"  Stock actual: {art[\\\"\"stock_actual\\\"\"]} {art[\\\"\"unidad\\\"\"]}\\\"\"); print(f\\\"\"  Stock m√≠nimo: {art[\\\"\"stock_minimo\\\"\"]}\\\"\"); print(f\\\"\"  Stock m√°ximo: {art.get(\\\"\"stock_maximo\\\"\", \\\"\"N/A\\\"\")}\\\"\"); print(f\\\"\"  Estado: {\\\"\"‚úÖ Stock negativo permitido\\\"\" if float(art[\\\"\"stock_actual\\\"\"]) < 0 else \\\"\"Stock positivo\\\"\"}\\\"\")\"\" && echo \"\"\"\" && echo \"\"üìã Verificando solicitudes de compra generadas:\"\" && curl -s -X GET \"\"http://localhost:5001/api/solicitudes-compra?estado=pendiente\"\" -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -c \"\"import sys, json; data = json.load(sys.stdin); solicitudes = data[\\\"\"data\\\"\"][\\\"\"solicitudes\\\"\"]; print(f\\\"\"Total solicitudes pendientes: {len(solicitudes)}\\\"\"); print(\\\"\"\\\"\"); [print(f\\\"\"  ‚úÖ {s[\\\"\"ticket_id\\\"\"]}\\\"\"); print(f\\\"\"     Art√≠culo: {s[\\\"\"articulo\\\"\"][\\\"\"nombre\\\"\"]}\\\"\"); print(f\\\"\"     Cantidad solicitada: {s[\\\"\"cantidad_solicitada\\\"\"]} {s[\\\"\"articulo\\\"\"][\\\"\"unidad\\\"\"]}\\\"\"); print(f\\\"\"     Motivo: {s[\\\"\"motivo\\\"\"][:80]}...\\\"\"); print(f\\\"\"     Prioridad: {s[\\\"\"prioridad\\\"\"]}\\\"\"); print(\\\"\"\\\"\") for s in solicitudes[-1:]]\"\"')",
      "Bash(bash -c 'TOKEN=$(cat /tmp/token-disenador.txt) && curl -s -X GET \"\"http://localhost:5001/api/solicitudes-compra?estado=pendiente\"\" -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -m json.tool | head -50')",
      "Bash(bash -c 'TOKEN=$(cat /tmp/token-disenador.txt) && echo \"\"=== TEST FINAL: Crear pedido con art√≠culo 21 que dejar√° stock negativo ===\"\" && curl -s -X POST \"\"http://localhost:5001/api/pedidos\"\" -H \"\"Content-Type: application/json\"\" -H \"\"Authorization: Bearer $TOKEN\"\" -d \"\"{\\\"\"articulos\\\"\":[{\\\"\"articulo_id\\\"\":21,\\\"\"cantidad\\\"\":100}],\\\"\"proyecto\\\"\":\\\"\"Proyecto Test Final\\\"\",\\\"\"observaciones\\\"\":\\\"\"Prueba final despu√©s del fix\\\"\"}\"\" | python3 -c \"\"import sys, json; data = json.load(sys.stdin); print(f\\\"\"‚úÖ Pedido creado: {data[\\\"\"data\\\"\"][\\\"\"pedido\\\"\"][\\\"\"ticket_id\\\"\"]}\\\"\"); print(f\\\"\"‚úÖ Success: {data[\\\"\"success\\\"\"]}\\\"\"); print(f\\\"\"üìÑ Mensaje: {data[\\\"\"message\\\"\"]}\\\"\"); solicitudes = data[\\\"\"data\\\"\"].get(\\\"\"solicitudes_compra\\\"\", []); print(f\\\"\"\\nüì¶ Solicitudes de compra creadas: {len(solicitudes)}\\\"\"); [print(f\\\"\"  - Art√≠culo: {s[\\\"\"articulo\\\"\"]}\\\"\"); print(f\\\"\"    Cantidad: {s[\\\"\"cantidad_solicitada\\\"\"]}\\\"\"); print(f\\\"\"    Motivo: {s[\\\"\"motivo\\\"\"]}\\\"\") for s in solicitudes]\"\"')",
      "Bash(bash -c 'TOKEN=$(cat /tmp/token-disenador.txt) && curl -s -X POST \"\"http://localhost:5001/api/pedidos\"\" -H \"\"Content-Type: application/json\"\" -H \"\"Authorization: Bearer $TOKEN\"\" -d \"\"{\\\"\"articulos\\\"\":[{\\\"\"articulo_id\\\"\":21,\\\"\"cantidad\\\"\":100}],\\\"\"proyecto\\\"\":\\\"\"Proyecto Test Final\\\"\",\\\"\"observaciones\\\"\":\\\"\"Prueba final despu√©s del fix\\\"\"}\"\" | python3 -m json.tool | head -60')",
      "Bash(bash -c 'TOKEN=$(cat /tmp/token-disenador.txt) && curl -s -X POST \"\"http://localhost:5001/api/pedidos\"\" -H \"\"Content-Type: application/json\"\" -H \"\"Authorization: Bearer $TOKEN\"\" -d \"\"{\\\"\"articulos\\\"\":[{\\\"\"articulo_id\\\"\":21,\\\"\"cantidad\\\"\":100}],\\\"\"proyecto\\\"\":\\\"\"Proyecto Test Final\\\"\",\\\"\"observaciones\\\"\":\\\"\"Prueba final despu√©s del fix\\\"\"}\"\" | python3 -m json.tool | grep -A5 \"\"solicitudes_compra\"\"')",
      "Bash(bash -c 'TOKEN=$(curl -s -X POST http://localhost:5001/api/auth/login -H \"\"Content-Type: application/json\"\" -d \"\"{\\\"\"email\\\"\":\\\"\"admin@3g.com\\\"\",\\\"\"password\\\"\":\\\"\"admin123\\\"\"}\"\" | python3 -c \"\"import sys, json; print(json.load(sys.stdin)[\\\"\"data\\\"\"][\\\"\"token\\\"\"])\"\") && echo \"\"‚úÖ Token obtenido\"\" && echo \"\"\"\" && echo \"\"=== Probando endpoint de art√≠culos ===\"\" && curl -s -X GET \"\"http://localhost:5001/api/articulos?activo=true\"\" -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -m json.tool | head -30')",
      "Bash(bash -c 'TOKEN=$(curl -s -X POST http://localhost:5001/api/auth/login -H \"\"Content-Type: application/json\"\" -d \"\"{\\\"\"email\\\"\":\\\"\"admin@3g.com\\\"\",\\\"\"password\\\"\":\\\"\"admin123\\\"\"}\"\" | python3 -c \"\"import sys, json; print(json.load(sys.stdin)[\\\"\"data\\\"\"][\\\"\"token\\\"\"])\"\") && echo \"\"$TOKEN\"\" > /tmp/token-test.txt && echo \"\"‚úÖ Token obtenido y guardado\"\"')",
      "Bash(bash -c 'TOKEN=$(cat /tmp/token-test.txt) && echo \"\"=== TEST: Creando orden de compra con cantidad mayor al stock actual ===\"\" && echo \"\"\"\" && echo \"\"üìä Verificando stock actual del art√≠culo 1:\"\" && curl -s -X GET \"\"http://localhost:5001/api/articulos/1\"\" -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -c \"\"import sys, json; art = json.load(sys.stdin)[\\\"\"data\\\"\"][\\\"\"articulo\\\"\"]; print(f\\\"\"  ID: {art[\\\"\"id\\\"\"]}\\\"\"); print(f\\\"\"  Nombre: {art[\\\"\"nombre\\\"\"]}\\\"\"); print(f\\\"\"  Stock actual: {art[\\\"\"stock_actual\\\"\"]} {art[\\\"\"unidad\\\"\"]}\\\"\"); print(f\\\"\"  Stock m√≠nimo: {art[\\\"\"stock_minimo\\\"\"]}\\\"\"); print(f\\\"\"  Stock m√°ximo: {art.get(\\\"\"stock_maximo\\\"\", \\\"\"N/A\\\"\")}\\\"\")\"\" && echo \"\"\"\" && echo \"\"üì¶ Creando orden de compra con cantidad 500 (mayor al stock)...\"\" && curl -s -X POST \"\"http://localhost:5001/api/ordenes-compra\"\" -H \"\"Content-Type: application/json\"\" -H \"\"Authorization: Bearer $TOKEN\"\" -d \"\"{\\\"\"articulos\\\"\":[{\\\"\"articulo_id\\\"\":1,\\\"\"cantidad\\\"\":500}],\\\"\"proveedor_id\\\"\":1,\\\"\"observaciones\\\"\":\\\"\"Orden de prueba - cantidad mayor al stock\\\"\"}\"\" | python3 -m json.tool | head -60')",
      "Bash(bash -c 'TOKEN=$(cat /tmp/token-test.txt) && echo \"\"=== Intentando crear orden de compra desde el frontend ===\"\" && curl -v -X POST \"\"http://localhost:5001/api/ordenes-compra\"\" -H \"\"Content-Type: application/json\"\" -H \"\"Authorization: Bearer $TOKEN\"\" -d \"\"{\\\"\"articulos\\\"\":[{\\\"\"articulo_id\\\"\":1,\\\"\"cantidad\\\"\":200,\\\"\"costo_unitario\\\"\":2.5}],\\\"\"proveedor_id\\\"\":1,\\\"\"observaciones\\\"\":\\\"\"Prueba desde frontend\\\"\"}\"\" 2>&1 | tail -80')",
      "Bash(export PGPASSWORD='tu_contrase√±a_segura')",
      "Bash(bash -c 'TOKEN=$(cat /tmp/token-test.txt) && echo \"\"=== TEST: Obtener notificaciones ===\"\" && curl -s -X GET \"\"http://localhost:5001/api/notificaciones\"\" -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -m json.tool')",
      "Bash(bash -c 'TOKEN=$(curl -s -X POST http://localhost:5001/api/auth/login -H \"\"Content-Type: application/json\"\" -d \"\"{\\\"\"email\\\"\":\\\"\"admin@3g.com\\\"\",\\\"\"password\\\"\":\\\"\"admin123\\\"\"}\"\" | python3 -c \"\"import sys, json; print(json.load(sys.stdin)[\\\"\"data\\\"\"][\\\"\"token\\\"\"])\"\") && echo \"\"‚úÖ Token obtenido y guardado en /tmp/token.txt\"\" && echo \"\"$TOKEN\"\" > /tmp/token.txt')",
      "Bash(bash -c 'TOKEN=$(cat /tmp/token.txt) && echo \"\"=== TEST 1: Verificar endpoint de notificaciones ===\"\" && curl -s -X GET \"\"http://localhost:5001/api/notificaciones\"\" -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -m json.tool | head -30')",
      "Bash(bash -c 'TOKEN=$(cat /tmp/token.txt) && echo \"\"=== TEST 2: Contar notificaciones no le√≠das ===\"\" && curl -s -X GET \"\"http://localhost:5001/api/notificaciones/count\"\" -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -m json.tool')",
      "Bash(bash -c 'TOKEN=$(cat /tmp/token.txt) && echo \"\"=== TEST 3: Crear orden de compra para generar notificaci√≥n ===\"\" && curl -s -X POST \"\"http://localhost:5001/api/ordenes-compra\"\" -H \"\"Content-Type: application/json\"\" -H \"\"Authorization: Bearer $TOKEN\"\" -d \"\"{\\\"\"articulos\\\"\":[{\\\"\"articulo_id\\\"\":1,\\\"\"cantidad\\\"\":50,\\\"\"costo_unitario\\\"\":2.5}],\\\"\"proveedor_id\\\"\":1,\\\"\"observaciones\\\"\":\\\"\"Orden de prueba para notificaciones\\\"\"}\"\" | python3 -m json.tool | head -50')",
      "Bash(bash -c 'TOKEN=$(cat /tmp/token.txt) && echo \"\"=== TEST 4: Verificar que se cre√≥ una notificaci√≥n ===\"\" && curl -s -X GET \"\"http://localhost:5001/api/notificaciones\"\" -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -c \"\"import sys, json; data = json.load(sys.stdin); notifs = data[\\\"\"data\\\"\"][\\\"\"notificaciones\\\"\"]; print(f\\\"\"Total notificaciones: {len(notifs)}\\\"\"); print(\\\"\"\\nNotificaciones:\\\"\"); [print(f\\\"\"  ID: {n[\\\"\"id\\\"\"]} | Tipo: {n[\\\"\"tipo\\\"\"]} | T√≠tulo: {n[\\\"\"titulo\\\"\"]}\\n  Mensaje: {n[\\\"\"mensaje\\\"\"]}\\n  Le√≠da: {n[\\\"\"leida\\\"\"]}\\n\\\"\") for n in notifs]\"\"')",
      "Bash(bash -c 'TOKEN=$(cat /tmp/token.txt) && echo \"\"=== TEST 5: Verificar contador de no le√≠das ===\"\" && curl -s -X GET \"\"http://localhost:5001/api/notificaciones/count\"\" -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -c \"\"import sys, json; data = json.load(sys.stdin); print(f\\\"\"Notificaciones no le√≠das: {data[\\\"\"data\\\"\"][\\\"\"count\\\"\"]}\\\"\")\"\"')",
      "Bash(bash -c 'TOKEN=$(cat /tmp/token.txt) && echo \"\"=== Verificar datos de la notificaci√≥n ===\"\" && curl -s -X GET \"\"http://localhost:5001/api/notificaciones\"\" -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -m json.tool | head -30')",
      "Bash(bash -c 'TOKEN=$(cat /tmp/token.txt) && echo \"\"=== TEST 6: Crear segunda orden de compra ===\"\" && curl -s -X POST \"\"http://localhost:5001/api/ordenes-compra\"\" -H \"\"Content-Type: application/json\"\" -H \"\"Authorization: Bearer $TOKEN\"\" -d \"\"{\\\"\"articulos\\\"\":[{\\\"\"articulo_id\\\"\":2,\\\"\"cantidad\\\"\":30,\\\"\"costo_unitario\\\"\":3.5}],\\\"\"proveedor_id\\\"\":1,\\\"\"observaciones\\\"\":\\\"\"Segunda orden de prueba\\\"\"}\"\" | python3 -c \"\"import sys, json; data = json.load(sys.stdin); print(f\\\"\"‚úÖ Orden creada: {data[\\\"\"data\\\"\"][\\\"\"orden\\\"\"][\\\"\"ticket_id\\\"\"]}\\\"\")\"\"')",
      "Bash(bash -c 'TOKEN=$(cat /tmp/token.txt) && echo \"\"=== TEST 7: Verificar notificaciones despu√©s de segunda orden ===\"\" && curl -s -X GET \"\"http://localhost:5001/api/notificaciones?solo_no_leidas=true\"\" -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -c \"\"import sys, json; data = json.load(sys.stdin); notifs = data[\\\"\"data\\\"\"][\\\"\"notificaciones\\\"\"]; print(f\\\"\"Total notificaciones NO LE√çDAS: {len(notifs)}\\\"\"); [print(f\\\"\"\\n  ID: {n[\\\"\"id\\\"\"]} | {n[\\\"\"titulo\\\"\"]}\\n  Mensaje: {n[\\\"\"mensaje\\\"\"]}\\n  Le√≠da: {n[\\\"\"leida\\\"\"]}\\\"\") for n in notifs]\"\"')",
      "Bash(bash -c 'TOKEN=$(cat /tmp/token.txt) && echo \"\"=== TEST 8: Contar notificaciones no le√≠das ===\"\" && curl -s -X GET \"\"http://localhost:5001/api/notificaciones/count\"\" -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -c \"\"import sys, json; data = json.load(sys.stdin); print(f\\\"\"‚úÖ Notificaciones no le√≠das: {data[\\\"\"data\\\"\"][\\\"\"count\\\"\"]}\\\"\")\"\"')",
      "Bash(bash -c 'TOKEN=$(cat /tmp/token.txt) && echo \"\"=== TEST 9: Marcar notificaci√≥n ID 3 como le√≠da ===\"\" && curl -s -X PUT \"\"http://localhost:5001/api/notificaciones/3/leer\"\" -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -c \"\"import sys, json; data = json.load(sys.stdin); print(f\\\"\"‚úÖ Notificaci√≥n marcada como le√≠da\\\"\")\"\" && echo \"\"\"\" && echo \"\"=== Verificar contador despu√©s de marcar como le√≠da ===\"\" && curl -s -X GET \"\"http://localhost:5001/api/notificaciones/count\"\" -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -c \"\"import sys, json; data = json.load(sys.stdin); print(f\\\"\"Notificaciones no le√≠das: {data[\\\"\"data\\\"\"][\\\"\"count\\\"\"]}\\\"\")\"\"')",
      "Bash(bash -c 'TOKEN_DISENADOR=$(curl -s -X POST http://localhost:5001/api/auth/login -H \"\"Content-Type: application/json\"\" -d \"\"{\\\"\"email\\\"\":\\\"\"dise√±ador@3g.com\\\"\",\\\"\"password\\\"\":\\\"\"dise√±ador123\\\"\"}\"\" | python3 -c \"\"import sys, json; print(json.load(sys.stdin)[\\\"\"data\\\"\"][\\\"\"token\\\"\"])\"\") && echo \"\"‚úÖ Token dise√±ador obtenido\"\" && echo \"\"$TOKEN_DISENADOR\"\" > /tmp/token-disenador.txt && echo \"\"\"\" && echo \"\"=== TEST 10: Dise√±ador crea un pedido ===\"\" && curl -s -X POST \"\"http://localhost:5001/api/pedidos\"\" -H \"\"Content-Type: application/json\"\" -H \"\"Authorization: Bearer $TOKEN_DISENADOR\"\" -d \"\"{\\\"\"articulos\\\"\":[{\\\"\"articulo_id\\\"\":1,\\\"\"cantidad\\\"\":5}],\\\"\"proyecto\\\"\":\\\"\"Proyecto Test Notificaciones\\\"\",\\\"\"observaciones\\\"\":\\\"\"Pedido para probar notificaciones\\\"\"}\"\" | python3 -c \"\"import sys, json; data = json.load(sys.stdin); print(f\\\"\"‚úÖ Pedido creado: {data[\\\"\"data\\\"\"][\\\"\"pedido\\\"\"][\\\"\"ticket_id\\\"\"]}\\\"\")\"\"')",
      "Bash(bash -c 'TOKEN=$(cat /tmp/token.txt) && echo \"\"=== TEST 11: Admin aprueba el pedido (debe generar notificaci√≥n al dise√±ador) ===\"\" && curl -s -X GET \"\"http://localhost:5001/api/pedidos/pendientes\"\" -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -c \"\"import sys, json; data = json.load(sys.stdin); pedidos = data[\\\"\"data\\\"\"][\\\"\"pedidos\\\"\"]; pedido_id = pedidos[0][\\\"\"id\\\"\"] if pedidos else None; print(f\\\"\"ID del √∫ltimo pedido: {pedido_id}\\\"\")\"\" && TOKEN=$(cat /tmp/token.txt) && curl -s -X PUT \"\"http://localhost:5001/api/pedidos/6/aprobar\"\" -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -c \"\"import sys, json; data = json.load(sys.stdin); print(f\\\"\"‚úÖ Pedido aprobado\\\"\")\"\"')",
      "Bash(bash -c 'TOKEN_DISENADOR=$(cat /tmp/token-disenador.txt) && echo \"\"=== TEST 12: Dise√±ador verifica sus notificaciones ===\"\" && curl -s -X GET \"\"http://localhost:5001/api/notificaciones\"\" -H \"\"Authorization: Bearer $TOKEN_DISENADOR\"\" | python3 -c \"\"import sys, json; data = json.load(sys.stdin); notifs = data[\\\"\"data\\\"\"][\\\"\"notificaciones\\\"\"]; print(f\\\"\"Total notificaciones del dise√±ador: {len(notifs)}\\\"\"); print(\\\"\"\\\"\"); [print(f\\\"\"  ID: {n[\\\"\"id\\\"\"]} | Tipo: {n[\\\"\"tipo\\\"\"]}\\n  T√≠tulo: {n[\\\"\"titulo\\\"\"]}\\n  Mensaje: {n[\\\"\"mensaje\\\"\"]}\\n  Le√≠da: {n[\\\"\"leida\\\"\"]}\\n\\\"\") for n in notifs]\"\"')",
      "Bash(bash -c 'TOKEN=$(cat /tmp/token.txt) && echo \"\"=== RESUMEN DE PRUEBAS COMPLETADAS ===\"\" && echo \"\"\"\" && echo \"\"‚úÖ TEST 1-2: Endpoints de notificaciones funcionando\"\" && echo \"\"‚úÖ TEST 3-5: Notificaci√≥n creada autom√°ticamente al crear orden de compra\"\" && echo \"\"‚úÖ TEST 6-9: Contador de no le√≠das funcionando correctamente\"\" && echo \"\"‚úÖ TEST 8-9: Marcar como le√≠da funcionando\"\" && echo \"\"\"\" && echo \"\"=== Verificaci√≥n final: Estado actual de notificaciones ===\"\" && curl -s -X GET \"\"http://localhost:5001/api/notificaciones\"\" -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -c \"\"import sys, json; data = json.load(sys.stdin); notifs = data[\\\"\"data\\\"\"][\\\"\"notificaciones\\\"\"]; print(f\\\"\"Total notificaciones en sistema: {len(notifs)}\\\"\"); [print(f\\\"\"\\n  {i+1}. ID: {n[\\\"\"id\\\"\"]} | Tipo: {n[\\\"\"tipo\\\"\"]}\\n     T√≠tulo: {n[\\\"\"titulo\\\"\"]}\\n     Le√≠da: {n[\\\"\"leida\\\"\"]}\\\"\") for i, n in enumerate(notifs)]\"\"')",
      "Bash(bash -c 'TOKEN=$(cat /tmp/token.txt) && echo \"\"=== Verificando usuarios de compras ===\"\" && curl -s -X GET \"\"http://localhost:5001/api/usuarios\"\" -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -c \"\"import sys, json; data = json.load(sys.stdin); usuarios = data[\\\"\"data\\\"\"][\\\"\"usuarios\\\"\"]; compras = [u for u in usuarios if u[\\\"\"rol\\\"\"] == \\\"\"compras\\\"\"]; print(f\\\"\"Usuarios de compras: {len(compras)}\\\"\"); [print(f\\\"\"  - {u[\\\"\"nombre\\\"\"]} ({u[\\\"\"email\\\"\"]}) - Activo: {u[\\\"\"activo\\\"\"]}\\\"\") for u in compras]\"\"')",
      "Bash(bash -c 'TOKEN=$(curl -s -X POST http://localhost:5001/api/auth/login -H \"\"Content-Type: application/json\"\" -d \"\"{\\\"\"email\\\"\":\\\"\"compras@3g.com\\\"\",\\\"\"password\\\"\":\\\"\"compras123\\\"\"}\"\" | python3 -c \"\"import sys, json; print(json.load(sys.stdin)[\\\"\"data\\\"\"][\\\"\"token\\\"\"])\"\") && echo \"\"‚úÖ Token de compras obtenido\"\" && echo \"\"$TOKEN\"\" > /tmp/token-compras.txt')",
      "Bash(bash -c 'TOKEN=$(cat /tmp/token-disenador.txt) && echo \"\"=== TEST: Dise√±ador crea pedido que generar√° solicitud de compra ===\"\" && echo \"\"\"\" && echo \"\"üìä Verificando stock del art√≠culo 1 antes del pedido:\"\" && curl -s -X GET \"\"http://localhost:5001/api/articulos/1\"\" -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -c \"\"import sys, json; art = json.load(sys.stdin)[\\\"\"data\\\"\"][\\\"\"articulo\\\"\"]; print(f\\\"\"  Art√≠culo: {art[\\\"\"nombre\\\"\"]}\\\"\"); print(f\\\"\"  Stock actual: {art[\\\"\"stock_actual\\\"\"]} {art[\\\"\"unidad\\\"\"]}\\\"\"); print(f\\\"\"  Stock m√≠nimo: {art[\\\"\"stock_minimo\\\"\"]}\\\"\"); print(f\\\"\"  Stock m√°ximo: {art.get(\\\"\"stock_maximo\\\"\", \\\"\"N/A\\\"\")}\\\"\"); stock_actual = float(art[\\\"\"stock_actual\\\"\"])\"\"')",
      "Bash(bash -c 'TOKEN=$(cat /tmp/token-disenador.txt) && echo \"\"=== Creando pedido de 60 unidades (generar√° solicitud de compra porque dejar√° stock negativo) ===\"\" && curl -s -X POST \"\"http://localhost:5001/api/pedidos\"\" -H \"\"Content-Type: application/json\"\" -H \"\"Authorization: Bearer $TOKEN\"\" -d \"\"{\\\"\"articulos\\\"\":[{\\\"\"articulo_id\\\"\":1,\\\"\"cantidad\\\"\":60}],\\\"\"proyecto\\\"\":\\\"\"Proyecto Test Notificaciones Solicitud\\\"\",\\\"\"observaciones\\\"\":\\\"\"Pedido para probar notificaciones de solicitudes\\\"\"}\"\" | python3 -m json.tool | head -80')",
      "Bash(bash -c 'TOKEN=$(cat /tmp/token-compras.txt) && echo \"\"=== Verificando notificaciones del usuario de COMPRAS ===\"\" && curl -s -X GET \"\"http://localhost:5001/api/notificaciones\"\" -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -c \"\"import sys, json; data = json.load(sys.stdin); notifs = data[\\\"\"data\\\"\"][\\\"\"notificaciones\\\"\"]; print(f\\\"\"Total notificaciones para compras: {len(notifs)}\\n\\\"\"); [print(f\\\"\"  ID: {n[\\\"\"id\\\"\"]} | Tipo: {n[\\\"\"tipo\\\"\"]}\\n  T√≠tulo: {n[\\\"\"titulo\\\"\"]}\\n  Mensaje: {n[\\\"\"mensaje\\\"\"]}\\n  Le√≠da: {n[\\\"\"leida\\\"\"]}\\n\\\"\") for n in notifs]\"\"')",
      "Bash(bash -c 'TOKEN=$(cat /tmp/token.txt) && echo \"\"=== Verificando notificaciones del ADMINISTRADOR ===\"\" && curl -s -X GET \"\"http://localhost:5001/api/notificaciones?solo_no_leidas=true\"\" -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -c \"\"import sys, json; data = json.load(sys.stdin); notifs = data[\\\"\"data\\\"\"][\\\"\"notificaciones\\\"\"]; print(f\\\"\"Total notificaciones NO LE√çDAS para admin: {len(notifs)}\\n\\\"\"); [print(f\\\"\"  ID: {n[\\\"\"id\\\"\"]} | Tipo: {n[\\\"\"tipo\\\"\"]}\\n  T√≠tulo: {n[\\\"\"titulo\\\"\"]}\\n  Mensaje: {n[\\\"\"mensaje\\\"\"]}\\n\\\"\") for n in notifs]\"\"')",
      "Bash(bash -c 'TOKEN=$(cat /tmp/token-compras.txt) && echo \"\"=== Contador de notificaciones no le√≠das para COMPRAS ===\"\" && curl -s -X GET \"\"http://localhost:5001/api/notificaciones/count\"\" -H \"\"Authorization: Bearer $TOKEN\"\" | python3 -c \"\"import sys, json; data = json.load(sys.stdin); print(f\\\"\"‚úÖ Notificaciones no le√≠das: {data[\\\"\"data\\\"\"][\\\"\"count\\\"\"]}\\\"\")\"\"')",
      "Bash(bash:*)",
      "Bash(chmod:*)",
      "Bash(afconvert:*)",
      "Bash(ffmpeg:*)",
      "Bash(rm:*)",
      "Bash(git rm:*)",
      "Bash(git config:*)",
      "Bash(git add:*)",
      "Bash(git commit:*)",
      "Bash(git push:*)"
    ],
    "deny": [],
    "ask": []
  }
}
